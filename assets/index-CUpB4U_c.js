(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const y of h)if(y.type==="childList")for(const C of y.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&l(C)}).observe(document,{childList:!0,subtree:!0});function s(h){const y={};return h.integrity&&(y.integrity=h.integrity),h.referrerPolicy&&(y.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?y.credentials="include":h.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function l(h){if(h.ep)return;h.ep=!0;const y=s(h);fetch(h.href,y)}})();var Ut,Q,qo,at,po,Bo,vr,Or,yr,mr,Mo,Lt={},Fo=[],Wi=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,On=Array.isArray;function Ie(o,i){for(var s in i)o[s]=i[s];return o}function $o(o){var i=o.parentNode;i&&i.removeChild(o)}function qe(o,i,s){var l,h,y,C={};for(y in i)y=="key"?l=i[y]:y=="ref"?h=i[y]:C[y]=i[y];if(arguments.length>2&&(C.children=arguments.length>3?Ut.call(arguments,2):s),typeof o=="function"&&o.defaultProps!=null)for(y in o.defaultProps)C[y]===void 0&&(C[y]=o.defaultProps[y]);return $t(o,C,l,h,null)}function $t(o,i,s,l,h){var y={type:o,props:i,key:s,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:h??++qo,__i:-1,__u:0};return h==null&&Q.vnode!=null&&Q.vnode(y),y}function Qi(){return{current:null}}function Pe(o){return o.children}function Se(o,i){this.props=o,this.context=i}function st(o,i){if(i==null)return o.__?st(o.__,o.__i+1):null;for(var s;i<o.__k.length;i++)if((s=o.__k[i])!=null&&s.__e!=null)return s.__e;return typeof o.type=="function"?st(o):null}function Lo(o){var i,s;if((o=o.__)!=null&&o.__c!=null){for(o.__e=o.__c.base=null,i=0;i<o.__k.length;i++)if((s=o.__k[i])!=null&&s.__e!=null){o.__e=o.__c.base=s.__e;break}return Lo(o)}}function gr(o){(!o.__d&&(o.__d=!0)&&at.push(o)&&!kn.__r++||po!==Q.debounceRendering)&&((po=Q.debounceRendering)||Bo)(kn)}function kn(){var o,i,s,l,h,y,C,A;for(at.sort(vr);o=at.shift();)o.__d&&(i=at.length,l=void 0,y=(h=(s=o).__v).__e,C=[],A=[],s.__P&&((l=Ie({},h)).__v=h.__v+1,Q.vnode&&Q.vnode(l),Er(s.__P,l,h,s.__n,s.__P.namespaceURI,32&h.__u?[y]:null,C,y??st(h),!!(32&h.__u),A),l.__v=h.__v,l.__.__k[l.__i]=l,zo(C,l,A),l.__e!=y&&Lo(l)),at.length>i&&at.sort(vr));kn.__r=0}function Uo(o,i,s,l,h,y,C,A,K,D,U){var P,G,$,J,le,ce=l&&l.__k||Fo,te=i.length;for(s.__d=K,Yi(s,i,ce),K=s.__d,P=0;P<te;P++)($=s.__k[P])!=null&&typeof $!="boolean"&&typeof $!="function"&&(G=$.__i===-1?Lt:ce[$.__i]||Lt,$.__i=P,Er(o,$,G,h,y,C,A,K,D,U),J=$.__e,$.ref&&G.ref!=$.ref&&(G.ref&&Cr(G.ref,null,$),U.push($.ref,$.__c||J,$)),le==null&&J!=null&&(le=J),65536&$.__u||G.__k===$.__k?K=Vo($,K,o):typeof $.type=="function"&&$.__d!==void 0?K=$.__d:J&&(K=J.nextSibling),$.__d=void 0,$.__u&=-196609);s.__d=K,s.__e=le}function Yi(o,i,s){var l,h,y,C,A,K=i.length,D=s.length,U=D,P=0;for(o.__k=[],l=0;l<K;l++)C=l+P,(h=o.__k[l]=(h=i[l])==null||typeof h=="boolean"||typeof h=="function"?null:typeof h=="string"||typeof h=="number"||typeof h=="bigint"||h.constructor==String?$t(null,h,null,null,null):On(h)?$t(Pe,{children:h},null,null,null):h.constructor===void 0&&h.__b>0?$t(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h)!=null?(h.__=o,h.__b=o.__b+1,A=Gi(h,s,C,U),h.__i=A,y=null,A!==-1&&(U--,(y=s[A])&&(y.__u|=131072)),y==null||y.__v===null?(A==-1&&P--,typeof h.type!="function"&&(h.__u|=65536)):A!==C&&(A==C-1?P--:A==C+1?P++:A>C?U>K-C?P+=A-C:P--:A<C&&(A==C-P?P-=A-C:P++),A!==l+P&&(h.__u|=65536))):(y=s[C])&&y.key==null&&y.__e&&!(131072&y.__u)&&(y.__e==o.__d&&(o.__d=st(y)),br(y,y,!1),s[C]=null,U--);if(U)for(l=0;l<D;l++)(y=s[l])!=null&&!(131072&y.__u)&&(y.__e==o.__d&&(o.__d=st(y)),br(y,y))}function Vo(o,i,s){var l,h;if(typeof o.type=="function"){for(l=o.__k,h=0;l&&h<l.length;h++)l[h]&&(l[h].__=o,i=Vo(l[h],i,s));return i}o.__e!=i&&(i&&o.type&&!s.contains(i)&&(i=st(o)),s.insertBefore(o.__e,i||null),i=o.__e);do i=i&&i.nextSibling;while(i!=null&&i.nodeType===8);return i}function Ne(o,i){return i=i||[],o==null||typeof o=="boolean"||(On(o)?o.some(function(s){Ne(s,i)}):i.push(o)),i}function Gi(o,i,s,l){var h=o.key,y=o.type,C=s-1,A=s+1,K=i[s];if(K===null||K&&h==K.key&&y===K.type&&!(131072&K.__u))return s;if(l>(K!=null&&!(131072&K.__u)?1:0))for(;C>=0||A<i.length;){if(C>=0){if((K=i[C])&&!(131072&K.__u)&&h==K.key&&y===K.type)return C;C--}if(A<i.length){if((K=i[A])&&!(131072&K.__u)&&h==K.key&&y===K.type)return A;A++}}return-1}function _o(o,i,s){i[0]==="-"?o.setProperty(i,s??""):o[i]=s==null?"":typeof s!="number"||Wi.test(i)?s:s+"px"}function bn(o,i,s,l,h){var y;e:if(i==="style")if(typeof s=="string")o.style.cssText=s;else{if(typeof l=="string"&&(o.style.cssText=l=""),l)for(i in l)s&&i in s||_o(o.style,i,"");if(s)for(i in s)l&&s[i]===l[i]||_o(o.style,i,s[i])}else if(i[0]==="o"&&i[1]==="n")y=i!==(i=i.replace(/(PointerCapture)$|Capture$/i,"$1")),i=i.toLowerCase()in o||i==="onFocusOut"||i==="onFocusIn"?i.toLowerCase().slice(2):i.slice(2),o.l||(o.l={}),o.l[i+y]=s,s?l?s.u=l.u:(s.u=Or,o.addEventListener(i,y?mr:yr,y)):o.removeEventListener(i,y?mr:yr,y);else{if(h=="http://www.w3.org/2000/svg")i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(i!="width"&&i!="height"&&i!="href"&&i!="list"&&i!="form"&&i!="tabIndex"&&i!="download"&&i!="rowSpan"&&i!="colSpan"&&i!="role"&&i!="popover"&&i in o)try{o[i]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&i[4]!=="-"?o.removeAttribute(i):o.setAttribute(i,i=="popover"&&s==1?"":s))}}function vo(o){return function(i){if(this.l){var s=this.l[i.type+o];if(i.t==null)i.t=Or++;else if(i.t<s.u)return;return s(Q.event?Q.event(i):i)}}}function Er(o,i,s,l,h,y,C,A,K,D){var U,P,G,$,J,le,ce,te,ne,Be,ge,We,ve,he,Qe,xt,be=i.type;if(i.constructor!==void 0)return null;128&s.__u&&(K=!!(32&s.__u),y=[A=i.__e=s.__e]),(U=Q.__b)&&U(i);e:if(typeof be=="function")try{if(te=i.props,ne="prototype"in be&&be.prototype.render,Be=(U=be.contextType)&&l[U.__c],ge=U?Be?Be.props.value:U.__:l,s.__c?ce=(P=i.__c=s.__c).__=P.__E:(ne?i.__c=P=new be(te,ge):(i.__c=P=new Se(te,ge),P.constructor=be,P.render=Zi),Be&&Be.sub(P),P.props=te,P.state||(P.state={}),P.context=ge,P.__n=l,G=P.__d=!0,P.__h=[],P._sb=[]),ne&&P.__s==null&&(P.__s=P.state),ne&&be.getDerivedStateFromProps!=null&&(P.__s==P.state&&(P.__s=Ie({},P.__s)),Ie(P.__s,be.getDerivedStateFromProps(te,P.__s))),$=P.props,J=P.state,P.__v=i,G)ne&&be.getDerivedStateFromProps==null&&P.componentWillMount!=null&&P.componentWillMount(),ne&&P.componentDidMount!=null&&P.__h.push(P.componentDidMount);else{if(ne&&be.getDerivedStateFromProps==null&&te!==$&&P.componentWillReceiveProps!=null&&P.componentWillReceiveProps(te,ge),!P.__e&&(P.shouldComponentUpdate!=null&&P.shouldComponentUpdate(te,P.__s,ge)===!1||i.__v===s.__v)){for(i.__v!==s.__v&&(P.props=te,P.state=P.__s,P.__d=!1),i.__e=s.__e,i.__k=s.__k,i.__k.forEach(function(Ye){Ye&&(Ye.__=i)}),We=0;We<P._sb.length;We++)P.__h.push(P._sb[We]);P._sb=[],P.__h.length&&C.push(P);break e}P.componentWillUpdate!=null&&P.componentWillUpdate(te,P.__s,ge),ne&&P.componentDidUpdate!=null&&P.__h.push(function(){P.componentDidUpdate($,J,le)})}if(P.context=ge,P.props=te,P.__P=o,P.__e=!1,ve=Q.__r,he=0,ne){for(P.state=P.__s,P.__d=!1,ve&&ve(i),U=P.render(P.props,P.state,P.context),Qe=0;Qe<P._sb.length;Qe++)P.__h.push(P._sb[Qe]);P._sb=[]}else do P.__d=!1,ve&&ve(i),U=P.render(P.props,P.state,P.context),P.state=P.__s;while(P.__d&&++he<25);P.state=P.__s,P.getChildContext!=null&&(l=Ie(Ie({},l),P.getChildContext())),ne&&!G&&P.getSnapshotBeforeUpdate!=null&&(le=P.getSnapshotBeforeUpdate($,J)),Uo(o,On(xt=U!=null&&U.type===Pe&&U.key==null?U.props.children:U)?xt:[xt],i,s,l,h,y,C,A,K,D),P.base=i.__e,i.__u&=-161,P.__h.length&&C.push(P),ce&&(P.__E=P.__=null)}catch(Ye){if(i.__v=null,K||y!=null){for(i.__u|=K?160:32;A&&A.nodeType===8&&A.nextSibling;)A=A.nextSibling;y[y.indexOf(A)]=null,i.__e=A}else i.__e=s.__e,i.__k=s.__k;Q.__e(Ye,i,s)}else y==null&&i.__v===s.__v?(i.__k=s.__k,i.__e=s.__e):i.__e=Xi(s.__e,i,s,l,h,y,C,K,D);(U=Q.diffed)&&U(i)}function zo(o,i,s){i.__d=void 0;for(var l=0;l<s.length;l++)Cr(s[l],s[++l],s[++l]);Q.__c&&Q.__c(i,o),o.some(function(h){try{o=h.__h,h.__h=[],o.some(function(y){y.call(h)})}catch(y){Q.__e(y,h.__v)}})}function Xi(o,i,s,l,h,y,C,A,K){var D,U,P,G,$,J,le,ce=s.props,te=i.props,ne=i.type;if(ne==="svg"?h="http://www.w3.org/2000/svg":ne==="math"?h="http://www.w3.org/1998/Math/MathML":h||(h="http://www.w3.org/1999/xhtml"),y!=null){for(D=0;D<y.length;D++)if(($=y[D])&&"setAttribute"in $==!!ne&&(ne?$.localName===ne:$.nodeType===3)){o=$,y[D]=null;break}}if(o==null){if(ne===null)return document.createTextNode(te);o=document.createElementNS(h,ne,te.is&&te),y=null,A=!1}if(ne===null)ce===te||A&&o.data===te||(o.data=te);else{if(y=y&&Ut.call(o.childNodes),ce=s.props||Lt,!A&&y!=null)for(ce={},D=0;D<o.attributes.length;D++)ce[($=o.attributes[D]).name]=$.value;for(D in ce)if($=ce[D],D!="children"){if(D=="dangerouslySetInnerHTML")P=$;else if(D!=="key"&&!(D in te)){if(D=="value"&&"defaultValue"in te||D=="checked"&&"defaultChecked"in te)continue;bn(o,D,null,$,h)}}for(D in te)$=te[D],D=="children"?G=$:D=="dangerouslySetInnerHTML"?U=$:D=="value"?J=$:D=="checked"?le=$:D==="key"||A&&typeof $!="function"||ce[D]===$||bn(o,D,$,ce[D],h);if(U)A||P&&(U.__html===P.__html||U.__html===o.innerHTML)||(o.innerHTML=U.__html),i.__k=[];else if(P&&(o.innerHTML=""),Uo(o,On(G)?G:[G],i,s,l,ne==="foreignObject"?"http://www.w3.org/1999/xhtml":h,y,C,y?y[0]:s.__k&&st(s,0),A,K),y!=null)for(D=y.length;D--;)y[D]!=null&&$o(y[D]);A||(D="value",J!==void 0&&(J!==o[D]||ne==="progress"&&!J||ne==="option"&&J!==ce[D])&&bn(o,D,J,ce[D],h),D="checked",le!==void 0&&le!==o[D]&&bn(o,D,le,ce[D],h))}return o}function Cr(o,i,s){try{if(typeof o=="function"){var l=typeof o.__u=="function";l&&o.__u(),l&&i==null||(o.__u=o(i))}else o.current=i}catch(h){Q.__e(h,s)}}function br(o,i,s){var l,h;if(Q.unmount&&Q.unmount(o),(l=o.ref)&&(l.current&&l.current!==o.__e||Cr(l,null,i)),(l=o.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(y){Q.__e(y,i)}l.base=l.__P=null}if(l=o.__k)for(h=0;h<l.length;h++)l[h]&&br(l[h],i,s||typeof o.type!="function");s||o.__e==null||$o(o.__e),o.__c=o.__=o.__e=o.__d=void 0}function Zi(o,i,s){return this.constructor(o,s)}function ct(o,i,s){var l,h,y,C;Q.__&&Q.__(o,i),h=(l=typeof s=="function")?null:s&&s.__k||i.__k,y=[],C=[],Er(i,o=(!l&&s||i).__k=qe(Pe,null,[o]),h||Lt,Lt,i.namespaceURI,!l&&s?[s]:h?null:i.firstChild?Ut.call(i.childNodes):null,y,!l&&s?s:h?h.__e:i.firstChild,l,C),zo(y,o,C)}function Ho(o,i){ct(o,i,Ho)}function Ji(o,i,s){var l,h,y,C,A=Ie({},o.props);for(y in o.type&&o.type.defaultProps&&(C=o.type.defaultProps),i)y=="key"?l=i[y]:y=="ref"?h=i[y]:A[y]=i[y]===void 0&&C!==void 0?C[y]:i[y];return arguments.length>2&&(A.children=arguments.length>3?Ut.call(arguments,2):s),$t(o.type,A,l||o.key,h||o.ref,null)}function eu(o,i){var s={__c:i="__cC"+Mo++,__:o,Consumer:function(l,h){return l.children(h)},Provider:function(l){var h,y;return this.getChildContext||(h=[],(y={})[i]=this,this.getChildContext=function(){return y},this.componentWillUnmount=function(){h=null},this.shouldComponentUpdate=function(C){this.props.value!==C.value&&h.some(function(A){A.__e=!0,gr(A)})},this.sub=function(C){h.push(C);var A=C.componentWillUnmount;C.componentWillUnmount=function(){h&&h.splice(h.indexOf(C),1),A&&A.call(C)}}),l.children}};return s.Provider.__=s.Consumer.contextType=s}Ut=Fo.slice,Q={__e:function(o,i,s,l){for(var h,y,C;i=i.__;)if((h=i.__c)&&!h.__)try{if((y=h.constructor)&&y.getDerivedStateFromError!=null&&(h.setState(y.getDerivedStateFromError(o)),C=h.__d),h.componentDidCatch!=null&&(h.componentDidCatch(o,l||{}),C=h.__d),C)return h.__E=h}catch(A){o=A}throw o}},qo=0,Se.prototype.setState=function(o,i){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ie({},this.state),typeof o=="function"&&(o=o(Ie({},s),this.props)),o&&Ie(s,o),o!=null&&this.__v&&(i&&this._sb.push(i),gr(this))},Se.prototype.forceUpdate=function(o){this.__v&&(this.__e=!0,o&&this.__h.push(o),gr(this))},Se.prototype.render=Pe,at=[],Bo=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,vr=function(o,i){return o.__v.__b-i.__v.__b},kn.__r=0,Or=0,yr=vo(!1),mr=vo(!0),Mo=0;var tu=0;function M(o,i,s,l,h,y){i||(i={});var C,A,K=i;if("ref"in K)for(A in K={},i)A=="ref"?C=i[A]:K[A]=i[A];var D={type:o,props:K,key:s,ref:C,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--tu,__i:-1,__u:0,__source:h,__self:y};if(typeof o=="function"&&(C=o.defaultProps))for(A in C)K[A]===void 0&&(K[A]=C[A]);return Q.vnode&&Q.vnode(D),D}var yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nu(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Wo={exports:{}};(function(o,i){(function(s,l){o.exports=l()})(yo,function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u])})(e,t)},l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function h(e,t,n){for(var r,u=0,a=t.length;u<a;u++)!r&&u in t||((r=r||Array.prototype.slice.call(t,0,u))[u]=t[u]);return e.concat(r||Array.prototype.slice.call(t))}var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:yo,C=Object.keys,A=Array.isArray;function K(e,t){return typeof t!="object"||C(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||y.Promise||(y.Promise=Promise);var D=Object.getPrototypeOf,U={}.hasOwnProperty;function P(e,t){return U.call(e,t)}function G(e,t){typeof t=="function"&&(t=t(D(e))),(typeof Reflect>"u"?C:Reflect.ownKeys)(t).forEach(function(n){J(e,n,t[n])})}var $=Object.defineProperty;function J(e,t,n,r){$(e,t,K(n&&P(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function le(e){return{from:function(t){return e.prototype=Object.create(t.prototype),J(e.prototype,"constructor",e),{extend:G.bind(null,e.prototype)}}}}var ce=Object.getOwnPropertyDescriptor,te=[].slice;function ne(e,t,n){return te.call(e,t,n)}function Be(e,t){return t(e)}function ge(e){if(!e)throw new Error("Assertion Failed")}function We(e){y.setImmediate?setImmediate(e):setTimeout(e,0)}function ve(e,t){if(typeof t=="string"&&P(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,u=t.length;r<u;++r){var a=ve(e,t[r]);n.push(a)}return n}var c=t.indexOf(".");if(c!==-1){var f=e[t.substr(0,c)];return f==null?void 0:ve(f,t.substr(c+1))}}function he(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ge(typeof n!="string"&&"length"in n);for(var r=0,u=t.length;r<u;++r)he(e,t[r],n[r])}else{var a,c,f=t.indexOf(".");f!==-1?(a=t.substr(0,f),(c=t.substr(f+1))===""?n===void 0?A(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n:he(f=!(f=e[a])||!P(e,a)?e[a]={}:f,c,n)):n===void 0?A(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Qe(e){var t,n={};for(t in e)P(e,t)&&(n[t]=e[t]);return n}var xt=[].concat;function be(e){return xt.apply([],e)}var je="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(be([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return y[e]}),Ye=new Set(je.map(function(e){return y[e]})),kt=null;function Ge(e){return kt=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=kt.get(n);if(r)return r;if(A(n)){r=[],kt.set(n,r);for(var u=0,a=n.length;u<a;++u)r.push(t(n[u]))}else if(Ye.has(n.constructor))r=n;else{var c,f=D(n);for(c in r=f===Object.prototype?{}:Object.create(f),kt.set(n,r),n)P(n,c)&&(r[c]=t(n[c]))}return r}(e),kt=null,e}var hi={}.toString;function Sn(e){return hi.call(e).slice(8,-1)}var An=typeof Symbol<"u"?Symbol.iterator:"@@iterator",pi=typeof An=="symbol"?function(e){var t;return e!=null&&(t=e[An])&&t.apply(e)}:function(){return null};function Xe(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var lt={};function Ke(e){var t,n,r,u;if(arguments.length===1){if(A(e))return e.slice();if(this===lt&&typeof e=="string")return[e];if(u=pi(e)){for(n=[];!(r=u.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Kn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Et=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],xe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Et),_i={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ft(e,t){this.name=e,this.message=t}function jr(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,u){return u.indexOf(n)===r}).join(`
`)}function zt(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=jr(e,t)}function dt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=jr(e,this.failures)}le(ft).from(Error).extend({toString:function(){return this.name+": "+this.message}}),le(zt).from(ft),le(dt).from(ft);var Dn=xe.reduce(function(e,t){return e[t]=t+"Error",e},{}),vi=ft,L=xe.reduce(function(e,t){var n=t+"Error";function r(u,a){this.name=n,u?typeof u=="string"?(this.message="".concat(u).concat(a?`
 `+a:""),this.inner=a||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=_i[t]||n,this.inner=null)}return le(r).from(vi),e[t]=r,e},{});L.Syntax=SyntaxError,L.Type=TypeError,L.Range=RangeError;var Tr=Et.reduce(function(e,t){return e[t+"Error"]=L[t],e},{}),Ht=xe.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=L[t]),e},{});function ee(){}function Pt(e){return e}function yi(e,t){return e==null||e===Pt?t:function(n){return t(e(n))}}function Ze(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function mi(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ze(r,this.onsuccess):r),u&&(this.onerror=this.onerror?Ze(u,this.onerror):u),a!==void 0?a:n}}function gi(e,t){return e===ee?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ze(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ze(r,this.onerror):r)}}function bi(e,t){return e===ee?t:function(n){var r=e.apply(this,arguments);K(n,r);var u=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Ze(u,this.onsuccess):u),a&&(this.onerror=this.onerror?Ze(a,this.onerror):a),r===void 0?n===void 0?void 0:n:K(r,n)}}function wi(e,t){return e===ee?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function jn(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,u=arguments.length,a=new Array(u);u--;)a[u]=arguments[u];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}Ht.ModifyError=zt,Ht.DexieError=ft,Ht.BulkError=dt;var Oe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ir(e){Oe=e}var Ot={},Rr=100,je=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,D(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,D(t),e]}(),Et=je[0],xe=je[1],je=je[2],xe=xe&&xe.then,Ct=Et&&Et.constructor,Tn=!!je,St=function(e,t){At.push([e,t]),Wt&&(queueMicrotask(ki),Wt=!1)},In=!0,Wt=!0,Je=[],Qt=[],Rn=Pt,Me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ee,pgp:!1,env:{},finalize:ee},F=Me,At=[],et=0,Yt=[];function B(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=F;if(typeof e!="function"){if(e!==Ot)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&qn(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,u){try{u(function(a){if(r._state===null){if(a===r)throw new TypeError("A promise cannot be resolved with itself.");var c=r._lib&&ht();a&&typeof a.then=="function"?n(r,function(f,v){a instanceof B?a._then(f,v):a.then(f,v)}):(r._state=!0,r._value=a,qr(r)),c&&pt()}},qn.bind(null,r))}catch(a){qn(r,a)}}(this,e)}var Nn={get:function(){var e=F,t=Jt;function n(r,u){var a=this,c=!e.global&&(e!==F||t!==Jt),f=c&&!$e(),v=new B(function(p,b){Bn(a,new Nr(Mr(r,e,c,f),Mr(u,e,c,f),p,b,e))});return this._consoleTask&&(v._consoleTask=this._consoleTask),v}return n.prototype=Ot,n},set:function(e){J(this,"then",e&&e.prototype===Ot?Nn:{get:function(){return e},set:Nn.set})}};function Nr(e,t,n,r,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=u}function qn(e,t){var n,r;Qt.push(t),e._state===null&&(n=e._lib&&ht(),t=Rn(t),e._state=!1,e._value=t,r=e,Je.some(function(u){return u._value===r._value})||Je.push(r),qr(e),n&&pt())}function qr(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Bn(e,t[n]);var u=e._PSD;--u.ref||u.finalize(),et===0&&(++et,St(function(){--et==0&&Mn()},[]))}function Bn(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++et,St(xi,[n,e,t])}else e._listeners.push(t)}function xi(e,t,n){try{var r,u=t._value;!t._state&&Qt.length&&(Qt=[]),r=Oe&&t._consoleTask?t._consoleTask.run(function(){return e(u)}):e(u),t._state||Qt.indexOf(u)!==-1||function(a){for(var c=Je.length;c;)if(Je[--c]._value===a._value)return Je.splice(c,1)}(t),n.resolve(r)}catch(a){n.reject(a)}finally{--et==0&&Mn(),--n.psd.ref||n.psd.finalize()}}function ki(){tt(Me,function(){ht()&&pt()})}function ht(){var e=In;return Wt=In=!1,e}function pt(){var e,t,n;do for(;0<At.length;)for(e=At,At=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<At.length);Wt=In=!0}function Mn(){var e=Je;Je=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Yt.slice(0),n=t.length;n;)t[--n]()}function Gt(e){return new B(Ot,!1,e)}function ie(e,t){var n=F;return function(){var r=ht(),u=F;try{return Le(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{Le(u,!1),r&&pt()}}}G(B.prototype,{then:Nn,_then:function(e,t){Bn(this,new Nr(null,null,e,t,F))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Gt)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Gt)(r)})},finally:function(e){return this.then(function(t){return B.resolve(e()).then(function(){return t})},function(t){return B.resolve(e()).then(function(){return Gt(t)})})},timeout:function(e,t){var n=this;return e<1/0?new B(function(r,u){var a=setTimeout(function(){return u(new L.Timeout(t))},e);n.then(r,u).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&J(B.prototype,Symbol.toStringTag,"Dexie.Promise"),Me.env=Br(),G(B,{all:function(){var e=Ke.apply(null,arguments).map(en);return new B(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(u,a){return B.resolve(u).then(function(c){e[a]=c,--r||t(e)},n)})})},resolve:function(e){return e instanceof B?e:e&&typeof e.then=="function"?new B(function(t,n){e.then(t,n)}):new B(Ot,!0,e)},reject:Gt,race:function(){var e=Ke.apply(null,arguments).map(en);return new B(function(t,n){e.map(function(r){return B.resolve(r).then(t,n)})})},PSD:{get:function(){return F},set:function(e){return F=e}},totalEchoes:{get:function(){return Jt}},newPSD:Fe,usePSD:tt,scheduler:{get:function(){return St},set:function(e){St=e}},rejectionMapper:{get:function(){return Rn},set:function(e){Rn=e}},follow:function(e,t){return new B(function(n,r){return Fe(function(u,a){var c=F;c.unhandleds=[],c.onunhandled=a,c.finalize=Ze(function(){var f,v=this;f=function(){v.unhandleds.length===0?u():a(v.unhandleds[0])},Yt.push(function p(){f(),Yt.splice(Yt.indexOf(p),1)}),++et,St(function(){--et==0&&Mn()},[])},c.finalize),e()},t,n,r)})}}),Ct&&(Ct.allSettled&&J(B,"allSettled",function(){var e=Ke.apply(null,arguments).map(en);return new B(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(u,a){return B.resolve(u).then(function(c){return r[a]={status:"fulfilled",value:c}},function(c){return r[a]={status:"rejected",reason:c}}).then(function(){return--n||t(r)})})})}),Ct.any&&typeof AggregateError<"u"&&J(B,"any",function(){var e=Ke.apply(null,arguments).map(en);return new B(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,u=new Array(r);e.forEach(function(a,c){return B.resolve(a).then(function(f){return t(f)},function(f){u[c]=f,--r||n(new AggregateError(u))})})})}));var fe={awaits:0,echoes:0,id:0},Pi=0,Xt=[],Zt=0,Jt=0,Oi=0;function Fe(e,t,n,r){var u=F,a=Object.create(u);return a.parent=u,a.ref=0,a.global=!1,a.id=++Oi,Me.env,a.env=Tn?{Promise:B,PromiseProp:{value:B,configurable:!0,writable:!0},all:B.all,race:B.race,allSettled:B.allSettled,any:B.any,resolve:B.resolve,reject:B.reject}:{},t&&K(a,t),++u.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},r=tt(a,e,n,r),a.ref===0&&a.finalize(),r}function _t(){return fe.id||(fe.id=++Pi),++fe.awaits,fe.echoes+=Rr,fe.id}function $e(){return!!fe.awaits&&(--fe.awaits==0&&(fe.id=0),fe.echoes=fe.awaits*Rr,!0)}function en(e){return fe.echoes&&e&&e.constructor===Ct?(_t(),e.then(function(t){return $e(),t},function(t){return $e(),ae(t)})):e}function Ei(){var e=Xt[Xt.length-1];Xt.pop(),Le(e,!1)}function Le(e,t){var n,r=F;(t?!fe.echoes||Zt++&&e===F:!Zt||--Zt&&e===F)||queueMicrotask(t?(function(u){++Jt,fe.echoes&&--fe.echoes!=0||(fe.echoes=fe.awaits=fe.id=0),Xt.push(F),Le(u,!0)}).bind(null,e):Ei),e!==F&&(F=e,r===Me&&(Me.env=Br()),Tn&&(n=Me.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(y,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Br(){var e=y.Promise;return Tn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(y,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function tt(e,t,n,r,u){var a=F;try{return Le(e,!0),t(n,r,u)}finally{Le(a,!1)}}function Mr(e,t,n,r){return typeof e!="function"?e:function(){var u=F;n&&_t(),Le(t,!0);try{return e.apply(this,arguments)}finally{Le(u,!1),r&&queueMicrotask($e)}}}function Fn(e){Promise===Ct&&fe.echoes===0?Zt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+xe).indexOf("[native code]")===-1&&(_t=$e=ee);var ae=B.reject,nt="￿",De="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fr="String expected.",vt=[],tn="__dbnames",$n="readonly",Ln="readwrite";function rt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var $r={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function nn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=Ge(t))[e],t}}function Lr(){throw L.Type()}function X(e,t){try{var n=Ur(e),r=Ur(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(u,a){for(var c=u.length,f=a.length,v=c<f?c:f,p=0;p<v;++p)if(u[p]!==a[p])return u[p]<a[p]?-1:1;return c===f?0:c<f?-1:1}(Vr(e),Vr(t));case"Array":return function(u,a){for(var c=u.length,f=a.length,v=c<f?c:f,p=0;p<v;++p){var b=X(u[p],a[p]);if(b!==0)return b}return c===f?0:c<f?-1:1}(e,t)}}catch{}return NaN}function Ur(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Sn(e),e==="ArrayBuffer"?"binary":e)}function Vr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var zr=(re.prototype._trans=function(e,t,n){var r=this._tx||F.trans,u=this.name,a=Oe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function c(p,b,d){if(!d.schema[u])throw new L.NotFound("Table "+u+" not part of transaction");return t(d.idbtrans,d)}var f=ht();try{var v=r&&r.db._novip===this.db._novip?r===F.trans?r._promise(e,c,n):Fe(function(){return r._promise(e,c,n)},{trans:r,transless:F.transless||F}):function p(b,d,w,_){if(b.idbdb&&(b._state.openComplete||F.letThrough||b._vip)){var g=b._createTransaction(d,w,b._dbSchema);try{g.create(),b._state.PR1398_maxLoop=3}catch(x){return x.name===Dn.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return p(b,d,w,_)})):ae(x)}return g._promise(d,function(x,m){return Fe(function(){return F.trans=g,_(x,m,g)})}).then(function(x){if(d==="readwrite")try{g.idbtrans.commit()}catch{}return d==="readonly"?x:g._completion.then(function(){return x})})}if(b._state.openComplete)return ae(new L.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return ae(new L.DatabaseClosed);b.open().catch(ee)}return b._state.dbReadyPromise.then(function(){return p(b,d,w,_)})}(this.db,e,[this.name],c);return a&&(v._consoleTask=a,v=v.catch(function(p){return console.trace(p),ae(p)})),v}finally{f&&pt()}},re.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?ae(new L.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(u){return n.hook.reading.fire(u)})}).then(t)},re.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(A(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=C(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(b){return 0<=v.keyPath.indexOf(b)})){for(var p=0;p<t.length;++p)if(t.indexOf(v.keyPath[p])===-1)return!1;return!0}return!1}).sort(function(v,p){return v.keyPath.length-p.keyPath.length})[0];if(n&&this.db._maxKey!==nt){var c=n.keyPath.slice(0,t.length);return this.where(c).equals(c.map(function(p){return e[p]}))}!n&&Oe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName,u=this.db._deps.indexedDB;function a(v,p){return u.cmp(v,p)===0}var f=t.reduce(function(w,p){var b=w[0],d=w[1],w=r[p],_=e[p];return[b||w,b||!w?rt(d,w&&w.multi?function(g){return g=ve(g,p),A(g)&&g.some(function(x){return a(_,x)})}:function(g){return a(_,ve(g,p))}):d]},[null,null]),c=f[0],f=f[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(f):n?this.filter(f):this.where(t).equals("")},re.prototype.filter=function(e){return this.toCollection().and(e)},re.prototype.count=function(e){return this.toCollection().count(e)},re.prototype.offset=function(e){return this.toCollection().offset(e)},re.prototype.limit=function(e){return this.toCollection().limit(e)},re.prototype.each=function(e){return this.toCollection().each(e)},re.prototype.toArray=function(e){return this.toCollection().toArray(e)},re.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},re.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,A(e)?"[".concat(e.join("+"),"]"):e))},re.prototype.reverse=function(){return this.toCollection().reverse()},re.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function u(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Lr&&(function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function b(){this.constructor=v}s(v,p),v.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}(u,t=e),Object.defineProperty(u.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),u.prototype.table=function(){return r},e=u);for(var a=new Set,c=e.prototype;c;c=D(c))Object.getOwnPropertyNames(c).forEach(function(v){return a.add(v)});function f(v){if(!v)return v;var p,b=Object.create(e.prototype);for(p in v)if(!a.has(p))try{b[p]=v[p]}catch{}return b}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=f,this.hook("reading",f),e},re.prototype.defineClass=function(){return this.mapToClass(function(e){K(this,e)})},re.prototype.add=function(e,t){var n=this,r=this.schema.primKey,u=r.auto,a=r.keyPath,c=e;return a&&u&&(c=nn(a)(e)),this._trans("readwrite",function(f){return n.core.mutate({trans:f,type:"add",keys:t!=null?[t]:null,values:[c]})}).then(function(f){return f.numFailures?B.reject(f.failures[0]):f.lastResult}).then(function(f){if(a)try{he(e,a,f)}catch{}return f})},re.prototype.update=function(e,t){return typeof e!="object"||A(e)?this.where(":id").equals(e).modify(t):(e=ve(e,this.schema.primKey.keyPath),e===void 0?ae(new L.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},re.prototype.put=function(e,t){var n=this,r=this.schema.primKey,u=r.auto,a=r.keyPath,c=e;return a&&u&&(c=nn(a)(e)),this._trans("readwrite",function(f){return n.core.mutate({trans:f,type:"put",values:[c],keys:t!=null?[t]:null})}).then(function(f){return f.numFailures?B.reject(f.failures[0]):f.lastResult}).then(function(f){if(a)try{he(e,a,f)}catch{}return f})},re.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?B.reject(n.failures[0]):void 0})},re.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:$r})}).then(function(t){return t.numFailures?B.reject(t.failures[0]):void 0})},re.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(u){return t.hook.reading.fire(u)})})})},re.prototype.bulkAdd=function(e,t,n){var r=this,u=Array.isArray(t)?t:void 0,a=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(c){var p=r.schema.primKey,f=p.auto,p=p.keyPath;if(p&&u)throw new L.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new L.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,p=p&&f?e.map(nn(p)):e;return r.core.mutate({trans:c,type:"add",keys:u,values:p,wantResults:a}).then(function(g){var d=g.numFailures,w=g.results,_=g.lastResult,g=g.failures;if(d===0)return a?w:_;throw new dt("".concat(r.name,".bulkAdd(): ").concat(d," of ").concat(v," operations failed"),g)})})},re.prototype.bulkPut=function(e,t,n){var r=this,u=Array.isArray(t)?t:void 0,a=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(c){var p=r.schema.primKey,f=p.auto,p=p.keyPath;if(p&&u)throw new L.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new L.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,p=p&&f?e.map(nn(p)):e;return r.core.mutate({trans:c,type:"put",keys:u,values:p,wantResults:a}).then(function(g){var d=g.numFailures,w=g.results,_=g.lastResult,g=g.failures;if(d===0)return a?w:_;throw new dt("".concat(r.name,".bulkPut(): ").concat(d," of ").concat(v," operations failed"),g)})})},re.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(c){return c.key}),u=e.map(function(c){return c.changes}),a=[];return this._trans("readwrite",function(c){return n.getMany({trans:c,keys:r,cache:"clone"}).then(function(f){var v=[],p=[];e.forEach(function(d,w){var _=d.key,g=d.changes,x=f[w];if(x){for(var m=0,k=Object.keys(g);m<k.length;m++){var O=k[m],E=g[O];if(O===t.schema.primKey.keyPath){if(X(E,_)!==0)throw new L.Constraint("Cannot update primary key in bulkUpdate()")}else he(x,O,E)}a.push(w),v.push(_),p.push(x)}});var b=v.length;return n.mutate({trans:c,type:"put",keys:v,values:p,updates:{keys:r,changeSpecs:u}}).then(function(d){var w=d.numFailures,_=d.failures;if(w===0)return b;for(var g=0,x=Object.keys(_);g<x.length;g++){var m,k=x[g],O=a[Number(k)];O!=null&&(m=_[k],delete _[k],_[O]=m)}throw new dt("".concat(t.name,".bulkUpdate(): ").concat(w," of ").concat(b," operations failed"),_)})})})},re.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(c){var u=c.numFailures,a=c.lastResult,c=c.failures;if(u===0)return a;throw new dt("".concat(t.name,".bulkDelete(): ").concat(u," of ").concat(n," operations failed"),c)})},re);function re(){}function Kt(e){function t(c,f){if(f){for(var v=arguments.length,p=new Array(v-1);--v;)p[v-1]=arguments[v];return n[c].subscribe.apply(null,p),e}if(typeof c=="string")return n[c]}var n={};t.addEventType=a;for(var r=1,u=arguments.length;r<u;++r)a(arguments[r]);return t;function a(c,f,v){if(typeof c!="object"){var p;f=f||wi;var b={subscribers:[],fire:v=v||ee,subscribe:function(d){b.subscribers.indexOf(d)===-1&&(b.subscribers.push(d),b.fire=f(b.fire,d))},unsubscribe:function(d){b.subscribers=b.subscribers.filter(function(w){return w!==d}),b.fire=b.subscribers.reduce(f,v)}};return n[c]=t[c]=b}C(p=c).forEach(function(d){var w=p[d];if(A(w))a(d,p[d][0],p[d][1]);else{if(w!=="asap")throw new L.InvalidArgument("Invalid event config");var _=a(d,Pt,function(){for(var g=arguments.length,x=new Array(g);g--;)x[g]=arguments[g];_.subscribers.forEach(function(m){We(function(){m.apply(null,x)})})})}})}}function Dt(e,t){return le(t).from({prototype:e}),t}function yt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Un(e,t){e.filter=rt(e.filter,t)}function Vn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return rt(r(),t())}:t,e.justLimit=n&&!r}function rn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new L.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Hr(e,t,n){var r=rn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function on(e,t,n,r){var u=e.replayFilter?rt(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},c=function(f,v,p){var b,d;u&&!u(v,p,function(w){return v.stop(w)},function(w){return v.fail(w)})||((d=""+(b=v.primaryKey))=="[object ArrayBuffer]"&&(d=""+new Uint8Array(b)),P(a,d)||(a[d]=!0,t(f,v,p)))};return Promise.all([e.or._iterate(c,n),Wr(Hr(e,r,n),e.algorithm,c,!e.keysOnly&&e.valueMapper)])}return Wr(Hr(e,r,n),rt(e.algorithm,u),t,!e.keysOnly&&e.valueMapper)}function Wr(e,t,n,r){var u=ie(r?function(a,c,f){return n(r(a),c,f)}:n);return e.then(function(a){if(a)return a.start(function(){var c=function(){return a.continue()};t&&!t(a,function(f){return c=f},function(f){a.stop(f),c=ee},function(f){a.fail(f),c=ee})||u(a.value,a,function(f){return c=f}),c()})})}var je=Symbol(),jt=(Qr.prototype.execute=function(e){if(this.add!==void 0){var t=this.add;if(A(t))return h(h([],A(e)?e:[],!0),t).sort();if(typeof t=="number")return(Number(e)||0)+t;if(typeof t=="bigint")try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(this.remove!==void 0){var n=this.remove;if(A(n))return A(e)?e.filter(function(r){return!n.includes(r)}).sort():[];if(typeof n=="number")return Number(e)-n;if(typeof n=="bigint")try{return BigInt(e)-n}catch{return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return t=(t=this.replacePrefix)===null||t===void 0?void 0:t[0],t&&typeof e=="string"&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},Qr);function Qr(e){Object.assign(this,e)}var Ci=(Z.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ae.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Z.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ae.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Z.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=rt(t.algorithm,e)},Z.prototype._iterate=function(e,t){return on(this._ctx,e,t,this._ctx.table.core)},Z.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&K(n,e),t._ctx=n,t},Z.prototype.raw=function(){return this._ctx.valueMapper=null,this},Z.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return on(t,e,n,t.table.core)})},Z.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,u=r.table.core;if(yt(r,!0))return u.count({trans:n,query:{index:rn(r,u.schema),range:r.range}}).then(function(c){return Math.min(c,r.limit)});var a=0;return on(r,function(){return++a,!1},n,u).then(function(){return a})}).then(e)},Z.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],u=n.length-1;function a(v,p){return p?a(v[n[p]],p-1):v[r]}var c=this._ctx.dir==="next"?1:-1;function f(v,p){return v=a(v,u),p=a(p,u),v<p?-c:p<v?c:0}return this.toArray(function(v){return v.sort(f)}).then(t)},Z.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&yt(r,!0)&&0<r.limit){var u=r.valueMapper,a=rn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(function(f){return f=f.result,u?f.map(u):f})}var c=[];return on(r,function(f){return c.push(f)},n,r.table.core).then(function(){return c})},e)},Z.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,yt(t)?Vn(t,function(){var n=e;return function(r,u){return n===0||(n===1?--n:u(function(){r.advance(n),n=0}),!1)}}):Vn(t,function(){var n=e;return function(){return--n<0}})),this},Z.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Vn(this._ctx,function(){var t=e;return function(n,r,u){return--t<=0&&r(u),0<=t}},!0),this},Z.prototype.until=function(e,t){return Un(this._ctx,function(n,r,u){return!e(n.value)||(r(u),t)}),this},Z.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Z.prototype.last=function(e){return this.reverse().first(e)},Z.prototype.filter=function(e){var t;return Un(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=rt(t.isMatch,e),this},Z.prototype.and=function(e){return this.filter(e)},Z.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Z.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Z.prototype.desc=function(){return this.reverse()},Z.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},Z.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Z.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},Z.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,u){n.push(u.key)}).then(function(){return n}).then(e)},Z.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&yt(t,!0)&&0<t.limit)return this._read(function(r){var u=rn(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:u,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,u){n.push(u.primaryKey)}).then(function(){return n}).then(e)},Z.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Z.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Z.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Z.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return Un(this._ctx,function(u){var r=u.primaryKey.toString(),u=P(t,r);return t[r]=!0,!u}),this},Z.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var u,a,c;c=typeof e=="function"?e:(u=C(e),a=u.length,function(m){for(var k=!1,O=0;O<a;++O){var E=u[O],S=e[E],T=ve(m,E);S instanceof jt?(he(m,E,S.execute(T)),k=!0):T!==S&&(he(m,E,S),k=!0)}return k});function f(m,E){var O=E.failures,E=E.numFailures;g+=m-E;for(var S=0,T=C(O);S<T.length;S++){var N=T[S];_.push(O[N])}}var v=n.table.core,p=v.schema.primaryKey,b=p.outbound,d=p.extractKey,w=t.db._options.modifyChunkSize||200,_=[],g=0,x=[];return t.clone().primaryKeys().then(function(m){function k(E){var S=Math.min(w,m.length-E);return v.getMany({trans:r,keys:m.slice(E,E+S),cache:"immutable"}).then(function(T){for(var N=[],I=[],R=b?[]:null,q=[],j=0;j<S;++j){var V=T[j],z={value:Ge(V),primKey:m[E+j]};c.call(z,z.value,z)!==!1&&(z.value==null?q.push(m[E+j]):b||X(d(V),d(z.value))===0?(I.push(z.value),b&&R.push(m[E+j])):(q.push(m[E+j]),N.push(z.value)))}return Promise.resolve(0<N.length&&v.mutate({trans:r,type:"add",values:N}).then(function(Y){for(var H in Y.failures)q.splice(parseInt(H),1);f(N.length,Y)})).then(function(){return(0<I.length||O&&typeof e=="object")&&v.mutate({trans:r,type:"put",keys:R,values:I,criteria:O,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<E}).then(function(Y){return f(I.length,Y)})}).then(function(){return(0<q.length||O&&e===zn)&&v.mutate({trans:r,type:"delete",keys:q,criteria:O,isAdditionalChunk:0<E}).then(function(Y){return f(q.length,Y)})}).then(function(){return m.length>E+S&&k(E+w)})})}var O=yt(n)&&n.limit===1/0&&(typeof e!="function"||e===zn)&&{index:n.index,range:n.range};return k(0).then(function(){if(0<_.length)throw new zt("Error modifying one or more objects",_,g,x);return m.length})})})},Z.prototype.delete=function(){var e=this._ctx,t=e.range;return yt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,u=t;return e.table.core.count({trans:n,query:{index:r,range:u}}).then(function(a){return e.table.core.mutate({trans:n,type:"deleteRange",range:u}).then(function(c){var f=c.failures;if(c.lastResult,c.results,c=c.numFailures,c)throw new zt("Could not delete some values",Object.keys(f).map(function(v){return f[v]}),a-c);return a-c})})}):this.modify(zn)},Z);function Z(){}var zn=function(e,t){return t.value=null};function Si(e,t){return e<t?-1:e===t?0:1}function Ai(e,t){return t<e?-1:e===t?0:1}function we(e,t,n){return e=e instanceof Gr?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function mt(e){return new e.Collection(e,function(){return Yr("")}).limit(0)}function un(e,t,n,r){var u,a,c,f,v,p,b,d=n.length;if(!n.every(function(g){return typeof g=="string"}))return we(e,Fr);function w(g){u=g==="next"?function(m){return m.toUpperCase()}:function(m){return m.toLowerCase()},a=g==="next"?function(m){return m.toLowerCase()}:function(m){return m.toUpperCase()},c=g==="next"?Si:Ai;var x=n.map(function(m){return{lower:a(m),upper:u(m)}}).sort(function(m,k){return c(m.lower,k.lower)});f=x.map(function(m){return m.upper}),v=x.map(function(m){return m.lower}),b=(p=g)==="next"?"":r}w("next"),e=new e.Collection(e,function(){return Ue(f[0],v[d-1]+r)}),e._ondirectionchange=function(g){w(g)};var _=0;return e._addAlgorithm(function(g,x,m){var k=g.key;if(typeof k!="string")return!1;var O=a(k);if(t(O,v,_))return!0;for(var E=null,S=_;S<d;++S){var T=function(N,I,R,q,j,V){for(var z=Math.min(N.length,q.length),Y=-1,H=0;H<z;++H){var ke=I[H];if(ke!==q[H])return j(N[H],R[H])<0?N.substr(0,H)+R[H]+R.substr(H+1):j(N[H],q[H])<0?N.substr(0,H)+q[H]+R.substr(H+1):0<=Y?N.substr(0,Y)+I[Y]+R.substr(Y+1):null;j(N[H],ke)<0&&(Y=H)}return z<q.length&&V==="next"?N+R.substr(N.length):z<N.length&&V==="prev"?N.substr(0,R.length):Y<0?null:N.substr(0,Y)+q[Y]+R.substr(Y+1)}(k,O,f[S],v[S],c,p);T===null&&E===null?_=S+1:(E===null||0<c(E,T))&&(E=T)}return x(E!==null?function(){g.continue(E+b)}:m),!1}),e}function Ue(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Yr(e){return{type:1,lower:e,upper:e}}var Gr=(Object.defineProperty(de.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),de.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?mt(this):new this.Collection(this,function(){return Ue(e,t,!n,!r)})}catch{return we(this,De)}},de.prototype.equals=function(e){return e==null?we(this,De):new this.Collection(this,function(){return Yr(e)})},de.prototype.above=function(e){return e==null?we(this,De):new this.Collection(this,function(){return Ue(e,void 0,!0)})},de.prototype.aboveOrEqual=function(e){return e==null?we(this,De):new this.Collection(this,function(){return Ue(e,void 0,!1)})},de.prototype.below=function(e){return e==null?we(this,De):new this.Collection(this,function(){return Ue(void 0,e,!1,!0)})},de.prototype.belowOrEqual=function(e){return e==null?we(this,De):new this.Collection(this,function(){return Ue(void 0,e)})},de.prototype.startsWith=function(e){return typeof e!="string"?we(this,Fr):this.between(e,e+nt,!0,!0)},de.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):un(this,function(t,n){return t.indexOf(n[0])===0},[e],nt)},de.prototype.equalsIgnoreCase=function(e){return un(this,function(t,n){return t===n[0]},[e],"")},de.prototype.anyOfIgnoreCase=function(){var e=Ke.apply(lt,arguments);return e.length===0?mt(this):un(this,function(t,n){return n.indexOf(t)!==-1},e,"")},de.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ke.apply(lt,arguments);return e.length===0?mt(this):un(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,nt)},de.prototype.anyOf=function(){var e=this,t=Ke.apply(lt,arguments),n=this._cmp;try{t.sort(n)}catch{return we(this,De)}if(t.length===0)return mt(this);var r=new this.Collection(this,function(){return Ue(t[0],t[t.length-1])});r._ondirectionchange=function(a){n=a==="next"?e._ascending:e._descending,t.sort(n)};var u=0;return r._addAlgorithm(function(a,c,f){for(var v=a.key;0<n(v,t[u]);)if(++u===t.length)return c(f),!1;return n(v,t[u])===0||(c(function(){a.continue(t[u])}),!1)}),r},de.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},de.prototype.noneOf=function(){var e=Ke.apply(lt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return we(this,De)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},de.prototype.inAnyRange=function(k,t){var n=this,r=this._cmp,u=this._ascending,a=this._descending,c=this._min,f=this._max;if(k.length===0)return mt(this);if(!k.every(function(O){return O[0]!==void 0&&O[1]!==void 0&&u(O[0],O[1])<=0}))return we(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",L.InvalidArgument);var v=!t||t.includeLowers!==!1,p=t&&t.includeUppers===!0,b,d=u;function w(O,E){return d(O[0],E[0])}try{(b=k.reduce(function(O,E){for(var S=0,T=O.length;S<T;++S){var N=O[S];if(r(E[0],N[1])<0&&0<r(E[1],N[0])){N[0]=c(N[0],E[0]),N[1]=f(N[1],E[1]);break}}return S===T&&O.push(E),O},[])).sort(w)}catch{return we(this,De)}var _=0,g=p?function(O){return 0<u(O,b[_][1])}:function(O){return 0<=u(O,b[_][1])},x=v?function(O){return 0<a(O,b[_][0])}:function(O){return 0<=a(O,b[_][0])},m=g,k=new this.Collection(this,function(){return Ue(b[0][0],b[b.length-1][1],!v,!p)});return k._ondirectionchange=function(O){d=O==="next"?(m=g,u):(m=x,a),b.sort(w)},k._addAlgorithm(function(O,E,S){for(var T,N=O.key;m(N);)if(++_===b.length)return E(S),!1;return!g(T=N)&&!x(T)||(n._cmp(N,b[_][1])===0||n._cmp(N,b[_][0])===0||E(function(){d===u?O.continue(b[_][0]):O.continue(b[_][1])}),!1)}),k},de.prototype.startsWithAnyOf=function(){var e=Ke.apply(lt,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?mt(this):this.inAnyRange(e.map(function(t){return[t,t+nt]})):we(this,"startsWithAnyOf() only works with strings")},de);function de(){}function Ee(e){return ie(function(t){return Tt(t),e(t.target.error),!1})}function Tt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var It="storagemutated",Hn="x-storagemutated-1",Ve=Kt(null,It),Ki=(Ce.prototype._lock=function(){return ge(!F.global),++this._reculock,this._reculock!==1||F.global||(F.lockOwnerFor=this),this},Ce.prototype._unlock=function(){if(ge(!F.global),--this._reculock==0)for(F.global||(F.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{tt(e[1],e[0])}catch{}}return this},Ce.prototype._locked=function(){return this._reculock&&F.lockOwnerFor!==this},Ce.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(ge(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new L.DatabaseClosed(r);case"MissingAPIError":throw new L.MissingAPI(r.message,r);default:throw new L.OpenFailed(r)}if(!this.active)throw new L.TransactionInactive;return ge(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ie(function(u){Tt(u),t._reject(e.error)}),e.onabort=ie(function(u){Tt(u),t.active&&t._reject(new L.Abort(e.error)),t.active=!1,t.on("abort").fire(u)}),e.oncomplete=ie(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ve.storagemutated.fire(e.mutatedParts)}),this},Ce.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return ae(new L.ReadOnly("Transaction is readonly"));if(!this.active)return ae(new L.TransactionInactive);if(this._locked())return new B(function(a,c){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,c)},F])});if(n)return Fe(function(){var a=new B(function(c,f){r._lock();var v=t(c,f,r);v&&v.then&&v.then(c,f)});return a.finally(function(){return r._unlock()}),a._lib=!0,a});var u=new B(function(a,c){var f=t(a,c,r);f&&f.then&&f.then(a,c)});return u._lib=!0,u},Ce.prototype._root=function(){return this.parent?this.parent._root():this},Ce.prototype.waitFor=function(e){var t,n=this._root(),r=B.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=a)}());var u=n._waitingFor;return new B(function(a,c){r.then(function(f){return n._waitingQueue.push(ie(a.bind(null,f)))},function(f){return n._waitingQueue.push(ie(c.bind(null,f)))}).finally(function(){n._waitingFor===u&&(n._waitingFor=null)})})},Ce.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new L.Abort))},Ce.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(P(t,e))return t[e];var n=this.schema[e];if(!n)throw new L.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},Ce);function Ce(){}function Wn(e,t,n,r,u,a,c){return{name:e,keyPath:t,unique:n,multi:r,auto:u,compound:a,src:(n&&!c?"&":"")+(r?"*":"")+(u?"++":"")+Xr(t)}}function Xr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Qn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(u){return[u.name,u]},n.reduce(function(u,a,c){return c=r(a,c),c&&(u[c[0]]=c[1]),u},{}))};var r}var Rt=function(e){try{return e.only([[]]),Rt=function(){return[[]]},[[]]}catch{return Rt=function(){return nt},nt}};function Yn(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return ve(n,t)}:function(n){return ve(n,e)};var t}function Zr(e){return[].slice.call(e)}var Di=0;function Nt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ji(e,t,v){function r(m){if(m.type===3)return null;if(m.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=m.lower,g=m.upper,x=m.lowerOpen,m=m.upperOpen;return _===void 0?g===void 0?null:t.upperBound(g,!!m):g===void 0?t.lowerBound(_,!!x):t.bound(_,g,!!x,!!m)}function u(w){var _,g=w.name;return{name:g,schema:w,mutate:function(x){var m=x.trans,k=x.type,O=x.keys,E=x.values,S=x.range;return new Promise(function(T,N){T=ie(T);var I=m.objectStore(g),R=I.keyPath==null,q=k==="put"||k==="add";if(!q&&k!=="delete"&&k!=="deleteRange")throw new Error("Invalid operation type: "+k);var j,V=(O||E||{length:1}).length;if(O&&E&&O.length!==E.length)throw new Error("Given keys array must have same length as given values array.");if(V===0)return T({numFailures:0,failures:{},results:[],lastResult:void 0});function z(me){++ke,Tt(me)}var Y=[],H=[],ke=0;if(k==="deleteRange"){if(S.type===4)return T({numFailures:ke,failures:H,results:[],lastResult:void 0});S.type===3?Y.push(j=I.clear()):Y.push(j=I.delete(r(S)))}else{var R=q?R?[E,O]:[E,null]:[O,null],W=R[0],pe=R[1];if(q)for(var _e=0;_e<V;++_e)Y.push(j=pe&&pe[_e]!==void 0?I[k](W[_e],pe[_e]):I[k](W[_e])),j.onerror=z;else for(_e=0;_e<V;++_e)Y.push(j=I[k](W[_e])),j.onerror=z}function gn(me){me=me.target.result,Y.forEach(function(ut,hr){return ut.error!=null&&(H[hr]=ut.error)}),T({numFailures:ke,failures:H,results:k==="delete"?O:Y.map(function(ut){return ut.result}),lastResult:me})}j.onerror=function(me){z(me),gn(me)},j.onsuccess=gn})},getMany:function(x){var m=x.trans,k=x.keys;return new Promise(function(O,E){O=ie(O);for(var S,T=m.objectStore(g),N=k.length,I=new Array(N),R=0,q=0,j=function(Y){Y=Y.target,I[Y._pos]=Y.result,++q===R&&O(I)},V=Ee(E),z=0;z<N;++z)k[z]!=null&&((S=T.get(k[z]))._pos=z,S.onsuccess=j,S.onerror=V,++R);R===0&&O(I)})},get:function(x){var m=x.trans,k=x.key;return new Promise(function(O,E){O=ie(O);var S=m.objectStore(g).get(k);S.onsuccess=function(T){return O(T.target.result)},S.onerror=Ee(E)})},query:(_=p,function(x){return new Promise(function(m,k){m=ie(m);var O,E,S,R=x.trans,T=x.values,N=x.limit,j=x.query,I=N===1/0?void 0:N,q=j.index,j=j.range,R=R.objectStore(g),q=q.isPrimaryKey?R:R.index(q.name),j=r(j);if(N===0)return m({result:[]});_?((I=T?q.getAll(j,I):q.getAllKeys(j,I)).onsuccess=function(V){return m({result:V.target.result})},I.onerror=Ee(k)):(O=0,E=!T&&"openKeyCursor"in q?q.openKeyCursor(j):q.openCursor(j),S=[],E.onsuccess=function(V){var z=E.result;return z?(S.push(T?z.value:z.primaryKey),++O===N?m({result:S}):void z.continue()):m({result:S})},E.onerror=Ee(k))})}),openCursor:function(x){var m=x.trans,k=x.values,O=x.query,E=x.reverse,S=x.unique;return new Promise(function(T,N){T=ie(T);var q=O.index,I=O.range,R=m.objectStore(g),R=q.isPrimaryKey?R:R.index(q.name),q=E?S?"prevunique":"prev":S?"nextunique":"next",j=!k&&"openKeyCursor"in R?R.openKeyCursor(r(I),q):R.openCursor(r(I),q);j.onerror=Ee(N),j.onsuccess=ie(function(V){var z,Y,H,ke,W=j.result;W?(W.___id=++Di,W.done=!1,z=W.continue.bind(W),Y=(Y=W.continuePrimaryKey)&&Y.bind(W),H=W.advance.bind(W),ke=function(){throw new Error("Cursor not stopped")},W.trans=m,W.stop=W.continue=W.continuePrimaryKey=W.advance=function(){throw new Error("Cursor not started")},W.fail=ie(N),W.next=function(){var pe=this,_e=1;return this.start(function(){return _e--?pe.continue():pe.stop()}).then(function(){return pe})},W.start=function(pe){function _e(){if(j.result)try{pe()}catch(me){W.fail(me)}else W.done=!0,W.start=function(){throw new Error("Cursor behind last entry")},W.stop()}var gn=new Promise(function(me,ut){me=ie(me),j.onerror=Ee(ut),W.fail=ut,W.stop=function(hr){W.stop=W.continue=W.continuePrimaryKey=W.advance=ke,me(hr)}});return j.onsuccess=ie(function(me){j.onsuccess=_e,_e()}),W.continue=z,W.continuePrimaryKey=Y,W.advance=H,_e(),gn},T(W)):T(null)},N)})},count:function(x){var m=x.query,k=x.trans,O=m.index,E=m.range;return new Promise(function(S,T){var N=k.objectStore(g),I=O.isPrimaryKey?N:N.index(O.name),N=r(E),I=N?I.count(N):I.count();I.onsuccess=ie(function(R){return S(R.target.result)}),I.onerror=Ee(T)})}}}var a,c,f,b=(c=v,f=Zr((a=e).objectStoreNames),{schema:{name:a.name,tables:f.map(function(w){return c.objectStore(w)}).map(function(w){var _=w.keyPath,m=w.autoIncrement,g=A(_),x={},m={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_==null,compound:g,keyPath:_,autoIncrement:m,unique:!0,extractKey:Yn(_)},indexes:Zr(w.indexNames).map(function(k){return w.index(k)}).map(function(S){var O=S.name,E=S.unique,T=S.multiEntry,S=S.keyPath,T={name:O,compound:A(S),keyPath:S,unique:E,multiEntry:T,extractKey:Yn(S)};return x[Nt(S)]=T}),getIndexByKeyPath:function(k){return x[Nt(k)]}};return x[":id"]=m.primaryKey,_!=null&&(x[Nt(_)]=m.primaryKey),m})},hasGetAll:0<f.length&&"getAll"in c.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),v=b.schema,p=b.hasGetAll,b=v.tables.map(u),d={};return b.forEach(function(w){return d[w.name]=w}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(w){if(!d[w])throw new Error("Table '".concat(w,"' not found"));return d[w]},MIN_KEY:-1/0,MAX_KEY:Rt(t),schema:v}}function Ti(e,t,n,r){var u=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=ji(t,u,r),e.dbcore.reduce(function(a,c){return c=c.create,l(l({},a),c(a))},r))}}function an(e,r){var n=r.db,r=Ti(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(u){var a=u.name;e.core.schema.tables.some(function(c){return c.name===a})&&(u.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=u.core))})}function sn(e,t,n,r){n.forEach(function(u){var a=r[u];t.forEach(function(c){var f=function v(p,b){return ce(p,b)||(p=D(p))&&v(p,b)}(c,u);(!f||"value"in f&&f.value===void 0)&&(c===e.Transaction.prototype||c instanceof e.Transaction?J(c,u,{get:function(){return this.table(u)},set:function(v){$(this,u,{value:v,writable:!0,configurable:!0,enumerable:!0})}}):c[u]=new e.Table(u,a))})})}function Gn(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Ii(e,t){return e._cfg.version-t._cfg.version}function Ri(e,t,n,r){var u=e._dbSchema;n.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Qn("$meta",eo("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,u);a.create(n),a._completion.catch(r);var c=a._reject.bind(a),f=F.transless||F;Fe(function(){return F.trans=a,F.transless=f,t!==0?(an(e,n),p=t,((v=a).storeNames.includes("$meta")?v.table("$meta").get("version").then(function(b){return b??p}):B.resolve(p)).then(function(b){return w=b,_=a,g=n,x=[],b=(d=e)._versions,m=d._dbSchema=ln(0,d.idbdb,g),(b=b.filter(function(k){return k._cfg.version>=w})).length!==0?(b.forEach(function(k){x.push(function(){var O=m,E=k._cfg.dbschema;fn(d,O,g),fn(d,E,g),m=d._dbSchema=E;var S=Xn(O,E);S.add.forEach(function(q){Zn(g,q[0],q[1].primKey,q[1].indexes)}),S.change.forEach(function(q){if(q.recreate)throw new L.Upgrade("Not yet support for changing primary key");var j=g.objectStore(q.name);q.add.forEach(function(V){return cn(j,V)}),q.change.forEach(function(V){j.deleteIndex(V.name),cn(j,V)}),q.del.forEach(function(V){return j.deleteIndex(V)})});var T=k._cfg.contentUpgrade;if(T&&k._cfg.version>w){an(d,g),_._memoizedTables={};var N=Qe(E);S.del.forEach(function(q){N[q]=O[q]}),Gn(d,[d.Transaction.prototype]),sn(d,[d.Transaction.prototype],C(N),N),_.schema=N;var I,R=Kn(T);return R&&_t(),S=B.follow(function(){var q;(I=T(_))&&R&&(q=$e.bind(null,null),I.then(q,q))}),I&&typeof I.then=="function"?B.resolve(I):S.then(function(){return I})}}),x.push(function(O){var E,S,T=k._cfg.dbschema;E=T,S=O,[].slice.call(S.db.objectStoreNames).forEach(function(N){return E[N]==null&&S.db.deleteObjectStore(N)}),Gn(d,[d.Transaction.prototype]),sn(d,[d.Transaction.prototype],d._storeNames,d._dbSchema),_.schema=d._dbSchema}),x.push(function(O){d.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(d.idbdb.version/10)===k._cfg.version?(d.idbdb.deleteObjectStore("$meta"),delete d._dbSchema.$meta,d._storeNames=d._storeNames.filter(function(E){return E!=="$meta"})):O.objectStore("$meta").put(k._cfg.version,"version"))})}),function k(){return x.length?B.resolve(x.shift()(_.idbtrans)).then(k):B.resolve()}().then(function(){Jr(m,g)})):B.resolve();var d,w,_,g,x,m}).catch(c)):(C(u).forEach(function(b){Zn(n,b,u[b].primKey,u[b].indexes)}),an(e,n),void B.follow(function(){return e.on.populate.fire(a)}).catch(c));var v,p})}function Ni(e,t){Jr(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=ln(0,e.idbdb,t);fn(e,e._dbSchema,t);for(var r=0,u=Xn(n,e._dbSchema).change;r<u.length;r++){var a=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var f=t.objectStore(c.name);c.add.forEach(function(v){Oe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(v.src)),cn(f,v)})}(u[r]);if(typeof a=="object")return a.value}}function Xn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var u=e[n],a=t[n];if(u){var c={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||u.primKey.auto!==a.primKey.auto)c.recreate=!0,r.change.push(c);else{var f=u.idxByName,v=a.idxByName,p=void 0;for(p in f)v[p]||c.del.push(p);for(p in v){var b=f[p],d=v[p];b?b.src!==d.src&&c.change.push(d):c.add.push(d)}(0<c.del.length||0<c.add.length||0<c.change.length)&&r.change.push(c)}}else r.add.push([n,a])}return r}function Zn(e,t,n,r){var u=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return cn(u,a)}),u}function Jr(e,t){C(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Oe&&console.debug("Dexie: Creating missing table",n),Zn(t,n,e[n].primKey,e[n].indexes))})}function cn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ln(e,t,n){var r={};return ne(t.objectStoreNames,0).forEach(function(u){for(var a=n.objectStore(u),c=Wn(Xr(p=a.keyPath),p||"",!0,!1,!!a.autoIncrement,p&&typeof p!="string",!0),f=[],v=0;v<a.indexNames.length;++v){var b=a.index(a.indexNames[v]),p=b.keyPath,b=Wn(b.name,p,!!b.unique,!!b.multiEntry,!1,p&&typeof p!="string",!1);f.push(b)}r[u]=Qn(u,c,f)}),r}function fn(e,t,n){for(var r=n.db.objectStoreNames,u=0;u<r.length;++u){var a=r[u],c=n.objectStore(a);e._hasGetAll="getAll"in c;for(var f=0;f<c.indexNames.length;++f){var v=c.indexNames[f],p=c.index(v).keyPath,b=typeof p=="string"?p:"["+ne(p).join("+")+"]";!t[a]||(p=t[a].idxByName[b])&&(p.name=v,delete t[a].idxByName[b],t[a].idxByName[v]=p)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&y.WorkerGlobalScope&&y instanceof y.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function eo(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Wn(r,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),A(u),n===0)})}var qi=(dn.prototype._parseStoresSpec=function(e,t){C(e).forEach(function(n){if(e[n]!==null){var r=eo(e[n]),u=r.shift();if(u.unique=!0,u.multi)throw new L.Schema("Primary key cannot be multi-valued");r.forEach(function(a){if(a.auto)throw new L.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new L.Schema("Index must have a name and cannot be an empty string")}),t[n]=Qn(n,u,r)}})},dn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?K(this._cfg.storesSource,n):n;var n=t._versions,r={},u={};return n.forEach(function(a){K(r,a._cfg.storesSource),u=a._cfg.dbschema={},a._parseStoresSpec(r,u)}),t._dbSchema=u,Gn(t,[t._allTables,t,t.Transaction.prototype]),sn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],C(u),u),t._storeNames=C(u),this},dn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=jn(this._cfg.contentUpgrade||ee,e),this},dn);function dn(){}function Jn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Te(tn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function er(e){return e&&typeof e.databases=="function"}function tr(e){return Fe(function(){return F.letThrough=!0,e()})}function nr(e){return!("from"in e)}var ye=function(e,t){if(!this){var n=new ye;return e&&"d"in e&&K(n,e),n}K(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function qt(e,t,n){var r=X(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(nr(e))return K(e,{from:t,to:n,d:1});var u=e.l,r=e.r;if(X(n,e.from)<0)return u?qt(u,t,n):e.l={from:t,to:n,d:1,l:null,r:null},no(e);if(0<X(t,e.to))return r?qt(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},no(e);X(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<X(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,u&&!e.l&&Bt(e,u),r&&n&&Bt(e,r)}}function Bt(e,t){nr(t)||function n(r,v){var a=v.from,c=v.to,f=v.l,v=v.r;qt(r,a,c),f&&n(r,f),v&&n(r,v)}(e,t)}function to(e,t){var n=hn(t),r=n.next();if(r.done)return!1;for(var u=r.value,a=hn(e),c=a.next(u.from),f=c.value;!r.done&&!c.done;){if(X(f.from,u.to)<=0&&0<=X(f.to,u.from))return!0;X(u.from,f.from)<0?u=(r=n.next(f.from)).value:f=(c=a.next(u.from)).value}return!1}function hn(e){var t=nr(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&X(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||X(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function no(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),u=1<r?"r":r<-1?"l":"";u&&(t=u=="r"?"l":"r",n=l({},e),r=e[u],e.from=r.from,e.to=r.to,e[u]=r[u],n[u]=r[t],(e[t]=n).d=ro(n)),e.d=ro(e)}function ro(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function pn(e,t){return C(t).forEach(function(n){e[n]?Bt(e[n],t[n]):e[n]=function r(u){var a,c,f={};for(a in u)P(u,a)&&(c=u[a],f[a]=!c||typeof c!="object"||Ye.has(c.constructor)?c:r(c));return f}(t[n])}),e}function rr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&to(t[n],e[n])})}G(ye.prototype,((xe={add:function(e){return Bt(this,e),this},addKey:function(e){return qt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return qt(t,n,n)}),this},hasKey:function(e){var t=hn(this).next(e).value;return t&&X(t.from,e)<=0&&0<=X(t.to,e)}})[An]=function(){return hn(this)},xe));var ot={},or={},ir=!1;function _n(e){pn(or,e),ir||(ir=!0,setTimeout(function(){ir=!1,ur(or,!(or={}))},0))}function ur(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,u=Object.values(ot);r<u.length;r++)oo(c=u[r],e,n,t);else for(var a in e){var c,f=/^idb\:\/\/(.*)\/(.*)\//.exec(a);f&&(a=f[1],f=f[2],(c=ot["idb://".concat(a,"/").concat(f)])&&oo(c,e,n,t))}n.forEach(function(v){return v()})}function oo(e,t,n,r){for(var u=[],a=0,c=Object.entries(e.queries.query);a<c.length;a++){for(var f=c[a],v=f[0],p=[],b=0,d=f[1];b<d.length;b++){var w=d[b];rr(t,w.obsSet)?w.subscribers.forEach(function(m){return n.add(m)}):r&&p.push(w)}r&&u.push([v,p])}if(r)for(var _=0,g=u;_<g.length;_++){var x=g[_],v=x[0],p=x[1];e.queries.query[v]=p}}function Bi(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ae(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,u=Math.round(10*e.verno),a=!1;function c(){if(t.openCanceller!==r)throw new L.DatabaseClosed("db.open() was cancelled")}function f(){return new B(function(w,_){if(c(),!n)throw new L.MissingAPI;var g=e.name,x=t.autoSchema||!u?n.open(g):n.open(g,u);if(!x)throw new L.MissingAPI;x.onerror=Ee(_),x.onblocked=ie(e._fireOnBlocked),x.onupgradeneeded=ie(function(m){var k;b=x.transaction,t.autoSchema&&!e._options.allowEmptyDB?(x.onerror=Tt,b.abort(),x.result.close(),(k=n.deleteDatabase(g)).onsuccess=k.onerror=ie(function(){_(new L.NoSuchDatabase("Database ".concat(g," doesnt exist")))})):(b.onerror=Ee(_),m=m.oldVersion>Math.pow(2,62)?0:m.oldVersion,d=m<1,e.idbdb=x.result,a&&Ni(e,b),Ri(e,m/10,b,_))},_),x.onsuccess=ie(function(){b=null;var m,k,O,E,S,T=e.idbdb=x.result,N=ne(T.objectStoreNames);if(0<N.length)try{var I=T.transaction((E=N).length===1?E[0]:E,"readonly");if(t.autoSchema)k=T,O=I,(m=e).verno=k.version/10,O=m._dbSchema=ln(0,k,O),m._storeNames=ne(k.objectStoreNames,0),sn(m,[m._allTables],C(O),O);else if(fn(e,e._dbSchema,I),((S=Xn(ln(0,(S=e).idbdb,I),S._dbSchema)).add.length||S.change.some(function(R){return R.add.length||R.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),T.close(),u=T.version+1,a=!0,w(f());an(e,I)}catch{}vt.push(e),T.onversionchange=ie(function(R){t.vcFired=!0,e.on("versionchange").fire(R)}),T.onclose=ie(function(R){e.on("close").fire(R)}),d&&(S=e._deps,I=g,T=S.indexedDB,S=S.IDBKeyRange,er(T)||I===tn||Jn(T,S).put({name:I}).catch(ee)),w()},_)}).catch(function(w){switch(w==null?void 0:w.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),f();break;case"VersionError":if(0<u)return u=0,f()}return B.reject(w)})}var v,p=t.dbReadyResolve,b=null,d=!1;return B.race([r,(typeof navigator>"u"?B.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(w){function _(){return indexedDB.databases().finally(w)}v=setInterval(_,100),_()}).finally(function(){return clearInterval(v)}):Promise.resolve()).then(f)]).then(function(){return c(),t.onReadyBeingFired=[],B.resolve(tr(function(){return e.on.ready.fire(e.vip)})).then(function w(){if(0<t.onReadyBeingFired.length){var _=t.onReadyBeingFired.reduce(jn,ee);return t.onReadyBeingFired=[],B.resolve(tr(function(){return _(e.vip)})).then(w)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(w){t.dbOpenError=w;try{b&&b.abort()}catch{}return r===t.openCanceller&&e._close(),ae(w)}).finally(function(){t.openComplete=!0,p()}).then(function(){var w;return d&&(w={},e.tables.forEach(function(_){_.schema.indexes.forEach(function(g){g.name&&(w["idb://".concat(e.name,"/").concat(_.name,"/").concat(g.name)]=new ye(-1/0,[[[]]]))}),w["idb://".concat(e.name,"/").concat(_.name,"/")]=w["idb://".concat(e.name,"/").concat(_.name,"/:dels")]=new ye(-1/0,[[[]]])}),Ve(It).fire(w),ur(w,!0)),e})}function ar(e){function t(a){return e.next(a)}var n=u(t),r=u(function(a){return e.throw(a)});function u(a){return function(v){var f=a(v),v=f.value;return f.done?v:v&&typeof v.then=="function"?v.then(n,r):A(v)?Promise.all(v).then(n,r):n(v)}}return u(t)()}function vn(e,t,n){for(var r=A(e)?e.slice():[e],u=0;u<n;++u)r.push(t);return r}var Mi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return l(l({},e),{table:function(t){var n=e.table(t),r=n.schema,u={},a=[];function c(d,w,_){var g=Nt(d),x=u[g]=u[g]||[],m=d==null?0:typeof d=="string"?1:d.length,k=0<w,k=l(l({},_),{name:k?"".concat(g,"(virtual-from:").concat(_.name,")"):_.name,lowLevelIndex:_,isVirtual:k,keyTail:w,keyLength:m,extractKey:Yn(d),unique:!k&&_.unique});return x.push(k),k.isPrimaryKey||a.push(k),1<m&&c(m===2?d[0]:d.slice(0,m-1),w+1,_),x.sort(function(O,E){return O.keyTail-E.keyTail}),k}t=c(r.primaryKey.keyPath,0,r.primaryKey),u[":id"]=[t];for(var f=0,v=r.indexes;f<v.length;f++){var p=v[f];c(p.keyPath,0,p)}function b(d){var w,_=d.query.index;return _.isVirtual?l(l({},d),{query:{index:_.lowLevelIndex,range:(w=d.query.range,_=_.keyTail,{type:w.type===1?2:w.type,lower:vn(w.lower,w.lowerOpen?e.MAX_KEY:e.MIN_KEY,_),lowerOpen:!0,upper:vn(w.upper,w.upperOpen?e.MIN_KEY:e.MAX_KEY,_),upperOpen:!0})}}):d}return l(l({},n),{schema:l(l({},r),{primaryKey:t,indexes:a,getIndexByKeyPath:function(d){return(d=u[Nt(d)])&&d[0]}}),count:function(d){return n.count(b(d))},query:function(d){return n.query(b(d))},openCursor:function(d){var w=d.query.index,_=w.keyTail,g=w.isVirtual,x=w.keyLength;return g?n.openCursor(b(d)).then(function(k){return k&&m(k)}):n.openCursor(d);function m(k){return Object.create(k,{continue:{value:function(O){O!=null?k.continue(vn(O,d.reverse?e.MAX_KEY:e.MIN_KEY,_)):d.unique?k.continue(k.key.slice(0,x).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,_)):k.continue()}},continuePrimaryKey:{value:function(O,E){k.continuePrimaryKey(vn(O,e.MAX_KEY,_),E)}},primaryKey:{get:function(){return k.primaryKey}},key:{get:function(){var O=k.key;return x===1?O[0]:O.slice(0,x)}},value:{get:function(){return k.value}}})}}})}})}};function sr(e,t,n,r){return n=n||{},r=r||"",C(e).forEach(function(u){var a,c,f;P(t,u)?(a=e[u],c=t[u],typeof a=="object"&&typeof c=="object"&&a&&c?(f=Sn(a))!==Sn(c)?n[r+u]=t[u]:f==="Object"?sr(a,c,n,r+u+"."):a!==c&&(n[r+u]=t[u]):a!==c&&(n[r+u]=t[u])):n[r+u]=void 0}),C(t).forEach(function(u){P(e,u)||(n[r+u]=t[u])}),n}function cr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Fi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return l(l({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return l(l({},n),{mutate:function(u){var a=F.trans,c=a.table(t).hook,f=c.deleting,v=c.creating,p=c.updating;switch(u.type){case"add":if(v.fire===ee)break;return a._promise("readwrite",function(){return b(u)},!0);case"put":if(v.fire===ee&&p.fire===ee)break;return a._promise("readwrite",function(){return b(u)},!0);case"delete":if(f.fire===ee)break;return a._promise("readwrite",function(){return b(u)},!0);case"deleteRange":if(f.fire===ee)break;return a._promise("readwrite",function(){return function d(w,_,g){return n.query({trans:w,values:!1,query:{index:r,range:_},limit:g}).then(function(x){var m=x.result;return b({type:"delete",keys:m,trans:w}).then(function(k){return 0<k.numFailures?Promise.reject(k.failures[0]):m.length<g?{failures:[],numFailures:0,lastResult:void 0}:d(w,l(l({},_),{lower:m[m.length-1],lowerOpen:!0}),g)})})}(u.trans,u.range,1e4)},!0)}return n.mutate(u);function b(d){var w,_,g,x=F.trans,m=d.keys||cr(r,d);if(!m)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?l(l({},d),{keys:m}):l({},d)).type!=="delete"&&(d.values=h([],d.values)),d.keys&&(d.keys=h([],d.keys)),w=n,g=m,((_=d).type==="add"?Promise.resolve([]):w.getMany({trans:_.trans,keys:g,cache:"immutable"})).then(function(k){var O=m.map(function(E,S){var T,N,I,R=k[S],q={onerror:null,onsuccess:null};return d.type==="delete"?f.fire.call(q,E,R,x):d.type==="add"||R===void 0?(T=v.fire.call(q,E,d.values[S],x),E==null&&T!=null&&(d.keys[S]=E=T,r.outbound||he(d.values[S],r.keyPath,E))):(T=sr(R,d.values[S]),(N=p.fire.call(q,T,E,R,x))&&(I=d.values[S],Object.keys(N).forEach(function(j){P(I,j)?I[j]=N[j]:he(I,j,N[j])}))),q});return n.mutate(d).then(function(E){for(var S=E.failures,T=E.results,N=E.numFailures,E=E.lastResult,I=0;I<m.length;++I){var R=(T||m)[I],q=O[I];R==null?q.onerror&&q.onerror(S[I]):q.onsuccess&&q.onsuccess(d.type==="put"&&k[I]?d.values[I]:R)}return{failures:S,results:T,numFailures:N,lastResult:E}}).catch(function(E){return O.forEach(function(S){return S.onerror&&S.onerror(E)}),Promise.reject(E)})})}}})}})}};function io(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],u=0,a=0;u<t.keys.length&&a<e.length;++u)X(t.keys[u],e[a])===0&&(r.push(n?Ge(t.values[u]):t.values[u]),++a);return r.length===e.length?r:null}catch{return null}}var $i={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return l(l({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var u=io(r.keys,r.trans._cache,r.cache==="clone");return u?B.resolve(u):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ge(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function uo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function ao(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Li={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new ye(e.MIN_KEY,e.MAX_KEY);return l(l({},e),{transaction:function(r,u,a){if(F.subscr&&u!=="readonly")throw new L.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(F.querier));return e.transaction(r,u,a)},table:function(r){var u=e.table(r),a=u.schema,c=a.primaryKey,d=a.indexes,f=c.extractKey,v=c.outbound,p=c.autoIncrement&&d.filter(function(_){return _.compound&&_.keyPath.includes(c.keyPath)}),b=l(l({},u),{mutate:function(_){function g(j){return j="idb://".concat(t,"/").concat(r,"/").concat(j),E[j]||(E[j]=new ye)}var x,m,k,O=_.trans,E=_.mutatedParts||(_.mutatedParts={}),S=g(""),T=g(":dels"),N=_.type,q=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[cr(c,_).filter(function(j){return j}),_.values]:[],I=q[0],R=q[1],q=_.trans._cache;return A(I)?(S.addKeys(I),(q=N==="delete"||I.length===R.length?io(I,q):null)||T.addKeys(I),(q||R)&&(x=g,m=q,k=R,a.indexes.forEach(function(j){var V=x(j.name||"");function z(H){return H!=null?j.extractKey(H):null}function Y(H){return j.multiEntry&&A(H)?H.forEach(function(ke){return V.addKey(ke)}):V.addKey(H)}(m||k).forEach(function(H,pe){var W=m&&z(m[pe]),pe=k&&z(k[pe]);X(W,pe)!==0&&(W!=null&&Y(W),pe!=null&&Y(pe))})}))):I?(R={from:I.lower,to:I.upper},T.add(R),S.add(R)):(S.add(n),T.add(n),a.indexes.forEach(function(j){return g(j.name).add(n)})),u.mutate(_).then(function(j){return!I||_.type!=="add"&&_.type!=="put"||(S.addKeys(j.results),p&&p.forEach(function(V){var z=_.values.map(function(H){return V.extractKey(H)}),Y=V.keyPath.findIndex(function(H){return H===c.keyPath});j.results.forEach(function(H){return z[Y]=H}),g(V.name).addKeys(z)})),O.mutatedParts=pn(O.mutatedParts||{},E),j})}}),d=function(g){var x=g.query,g=x.index,x=x.range;return[g,new ye((g=x.lower)!==null&&g!==void 0?g:e.MIN_KEY,(x=x.upper)!==null&&x!==void 0?x:e.MAX_KEY)]},w={get:function(_){return[c,new ye(_.key)]},getMany:function(_){return[c,new ye().addKeys(_.keys)]},count:d,query:d,openCursor:d};return C(w).forEach(function(_){b[_]=function(g){var x=F.subscr,m=!!x,k=uo(F,u)&&ao(_,g)?g.obsSet={}:x;if(m){var O=function(R){return R="idb://".concat(t,"/").concat(r,"/").concat(R),k[R]||(k[R]=new ye)},E=O(""),S=O(":dels"),x=w[_](g),m=x[0],x=x[1];if((_==="query"&&m.isPrimaryKey&&!g.values?S:O(m.name||"")).add(x),!m.isPrimaryKey){if(_!=="count"){var T=_==="query"&&v&&g.values&&u.query(l(l({},g),{values:!1}));return u[_].apply(this,arguments).then(function(R){if(_==="query"){if(v&&g.values)return T.then(function(z){return z=z.result,E.addKeys(z),R});var q=g.values?R.result.map(f):R.result;(g.values?E:S).addKeys(q)}else if(_==="openCursor"){var j=R,V=g.values;return j&&Object.create(j,{key:{get:function(){return S.addKey(j.primaryKey),j.key}},primaryKey:{get:function(){var z=j.primaryKey;return S.addKey(z),z}},value:{get:function(){return V&&E.addKey(j.primaryKey),j.value}}})}return R})}S.add(n)}}return u[_].apply(this,arguments)}}),b}})}};function so(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=l({},t),A(t.keys)&&(t.keys=t.keys.filter(function(u,a){return!(a in n.failures)})),"values"in t&&A(t.values)&&(t.values=t.values.filter(function(u,a){return!(a in n.failures)})),t)}function lr(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<X(n,r.lower):0<=X(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?X(e,t.upper)<0:X(e,t.upper)<=0));var n,r}function co(e,t,w,r,u,a){if(!w||w.length===0)return e;var c=t.query.index,f=c.multiEntry,v=t.query.range,p=r.schema.primaryKey.extractKey,b=c.extractKey,d=(c.lowLevelIndex||c).extractKey,w=w.reduce(function(_,g){var x=_,m=[];if(g.type==="add"||g.type==="put")for(var k=new ye,O=g.values.length-1;0<=O;--O){var E,S=g.values[O],T=p(S);k.hasKey(T)||(E=b(S),(f&&A(E)?E.some(function(q){return lr(q,v)}):lr(E,v))&&(k.addKey(T),m.push(S)))}switch(g.type){case"add":x=_.concat(t.values?m:m.map(function(j){return p(j)}));break;case"put":var N=new ye().addKeys(g.values.map(function(j){return p(j)})),x=_.filter(function(j){return!N.hasKey(t.values?p(j):j)}).concat(t.values?m:m.map(function(j){return p(j)}));break;case"delete":var I=new ye().addKeys(g.keys);x=_.filter(function(j){return!I.hasKey(t.values?p(j):j)});break;case"deleteRange":var R=g.range;x=_.filter(function(j){return!lr(p(j),R)})}return x},e);return w===e?e:(w.sort(function(_,g){return X(d(_),d(g))||X(p(_),p(g))}),t.limit&&t.limit<1/0&&(w.length>t.limit?w.length=t.limit:e.length===t.limit&&w.length<t.limit&&(u.dirty=!0)),a?Object.freeze(w):w)}function lo(e,t){return X(e.lower,t.lower)===0&&X(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Ui(e,t){return function(n,r,u,a){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=X(n,r))===0){if(u&&a)return 0;if(u)return 1;if(a)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,u,a){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=X(n,r))===0){if(u&&a)return 0;if(u)return-1;if(a)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Vi(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var u,a;e.subscribers.delete(n),e.subscribers.size===0&&(u=e,a=t,setTimeout(function(){u.subscribers.size===0&&Xe(a,u)},3e3))})}var zi={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return l(l({},e),{transaction:function(n,r,u){var a,c,f=e.transaction(n,r,u);return r==="readwrite"&&(c=(a=new AbortController).signal,u=function(v){return function(){if(a.abort(),r==="readwrite"){for(var p=new Set,b=0,d=n;b<d.length;b++){var w=d[b],_=ot["idb://".concat(t,"/").concat(w)];if(_){var g=e.table(w),x=_.optimisticOps.filter(function(V){return V.trans===f});if(f._explicit&&v&&f.mutatedParts)for(var m=0,k=Object.values(_.queries.query);m<k.length;m++)for(var O=0,E=(N=k[m]).slice();O<E.length;O++)rr((I=E[O]).obsSet,f.mutatedParts)&&(Xe(N,I),I.subscribers.forEach(function(V){return p.add(V)}));else if(0<x.length){_.optimisticOps=_.optimisticOps.filter(function(V){return V.trans!==f});for(var S=0,T=Object.values(_.queries.query);S<T.length;S++)for(var N,I,R,q=0,j=(N=T[S]).slice();q<j.length;q++)(I=j[q]).res!=null&&f.mutatedParts&&(v&&!I.dirty?(R=Object.isFrozen(I.res),R=co(I.res,I.req,x,g,I,R),I.dirty?(Xe(N,I),I.subscribers.forEach(function(V){return p.add(V)})):R!==I.res&&(I.res=R,I.promise=B.resolve({result:R}))):(I.dirty&&Xe(N,I),I.subscribers.forEach(function(V){return p.add(V)})))}}}p.forEach(function(V){return V()})}}},f.addEventListener("abort",u(!1),{signal:c}),f.addEventListener("error",u(!1),{signal:c}),f.addEventListener("complete",u(!0),{signal:c})),f},table:function(n){var r=e.table(n),u=r.schema.primaryKey;return l(l({},r),{mutate:function(a){var c=F.trans;if(u.outbound||c.db._options.cache==="disabled"||c.explicit)return r.mutate(a);var f=ot["idb://".concat(t,"/").concat(n)];return f?(c=r.mutate(a),a.type!=="add"&&a.type!=="put"||!(50<=a.values.length||cr(u,a).some(function(v){return v==null}))?(f.optimisticOps.push(a),a.mutatedParts&&_n(a.mutatedParts),c.then(function(v){0<v.numFailures&&(Xe(f.optimisticOps,a),(v=so(0,a,v))&&f.optimisticOps.push(v),a.mutatedParts&&_n(a.mutatedParts))}),c.catch(function(){Xe(f.optimisticOps,a),a.mutatedParts&&_n(a.mutatedParts)})):c.then(function(v){var p=so(0,l(l({},a),{values:a.values.map(function(_,d){var w,_=(w=u.keyPath)!==null&&w!==void 0&&w.includes(".")?Ge(_):l({},_);return he(_,u.keyPath,v.results[d]),_})}),v);f.optimisticOps.push(p),queueMicrotask(function(){return a.mutatedParts&&_n(a.mutatedParts)})}),c):r.mutate(a)},query:function(a){if(!uo(F,r)||!ao("query",a))return r.query(a);var c=((p=F.trans)===null||p===void 0?void 0:p.db._options.cache)==="immutable",d=F,f=d.requery,v=d.signal,p=function(g,x,m,k){var O=ot["idb://".concat(g,"/").concat(x)];if(!O)return[];if(!(x=O.queries[m]))return[null,!1,O,null];var E=x[(k.query?k.query.index.name:null)||""];if(!E)return[null,!1,O,null];switch(m){case"query":var S=E.find(function(T){return T.req.limit===k.limit&&T.req.values===k.values&&lo(T.req.query.range,k.query.range)});return S?[S,!0,O,E]:[E.find(function(T){return("limit"in T.req?T.req.limit:1/0)>=k.limit&&(!k.values||T.req.values)&&Ui(T.req.query.range,k.query.range)}),!1,O,E];case"count":return S=E.find(function(T){return lo(T.req.query.range,k.query.range)}),[S,!!S,O,E]}}(t,n,"query",a),b=p[0],d=p[1],w=p[2],_=p[3];return b&&d?b.obsSet=a.obsSet:(d=r.query(a).then(function(g){var x=g.result;if(b&&(b.res=x),c){for(var m=0,k=x.length;m<k;++m)Object.freeze(x[m]);Object.freeze(x)}else g.result=Ge(x);return g}).catch(function(g){return _&&b&&Xe(_,b),Promise.reject(g)}),b={obsSet:a.obsSet,promise:d,subscribers:new Set,type:"query",req:a,dirty:!1},_?_.push(b):(_=[b],(w=w||(ot["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[a.query.index.name||""]=_)),Vi(b,_,f,v),b.promise.then(function(g){return{result:co(g.result,a,w==null?void 0:w.optimisticOps,r,b,c)}})}})}})}};function yn(e,t){return new Proxy(e,{get:function(n,r,u){return r==="db"?t:Reflect.get(n,r,u)}})}var Te=(se.prototype.version=function(e){if(isNaN(e)||e<.1)throw new L.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new L.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Ii),n.stores({}),this._state.autoSchema=!1,n)},se.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||F.letThrough||this._vip)?e():new B(function(n,r){if(t._state.openComplete)return r(new L.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new L.DatabaseClosed);t.open().catch(ee)}t._state.dbReadyPromise.then(n,r)}).then(e)},se.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,u=e.name;return u&&this.unuse({stack:t,name:u}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:u}),e.sort(function(a,c){return a.level-c.level}),this},se.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(u){return r?u.create!==r:!!n&&u.name!==n})),this},se.prototype.open=function(){var e=this;return tt(Me,function(){return Bi(e)})},se.prototype._close=function(){var e=this._state,t=vt.indexOf(this);if(0<=t&&vt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new B(function(n){e.dbReadyResolve=n}),e.openCanceller=new B(function(n,r){e.cancelOpen=r}))},se.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new L.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new L.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},se.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new B(function(u,a){function c(){t.close(e);var f=t._deps.indexedDB.deleteDatabase(t.name);f.onsuccess=ie(function(){var v,p,b;v=t._deps,p=t.name,b=v.indexedDB,v=v.IDBKeyRange,er(b)||p===tn||Jn(b,v).delete(p).catch(ee),u()}),f.onerror=Ee(a),f.onblocked=t._fireOnBlocked}if(n)throw new L.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(c):c()})},se.prototype.backendDB=function(){return this.idbdb},se.prototype.isOpen=function(){return this.idbdb!==null},se.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},se.prototype.hasFailed=function(){return this._state.dbOpenError!==null},se.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(se.prototype,"tables",{get:function(){var e=this;return C(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),se.prototype.transaction=function(){var e=(function(t,n,r){var u=arguments.length;if(u<2)throw new L.InvalidArgument("Too few arguments");for(var a=new Array(u-1);--u;)a[u-1]=arguments[u];return r=a.pop(),[t,be(a),r]}).apply(this,arguments);return this._transaction.apply(this,e)},se.prototype._transaction=function(e,t,n){var r=this,u=F.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var a,c,f=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(c=t.map(function(p){if(p=p instanceof r.Table?p.name:p,typeof p!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return p}),e=="r"||e===$n)a=$n;else{if(e!="rw"&&e!=Ln)throw new L.InvalidArgument("Invalid transaction mode: "+e);a=Ln}if(u){if(u.mode===$n&&a===Ln){if(!f)throw new L.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&c.forEach(function(p){if(u&&u.storeNames.indexOf(p)===-1){if(!f)throw new L.SubTransaction("Table "+p+" not included in parent transaction.");u=null}}),f&&u&&!u.active&&(u=null)}}catch(p){return u?u._promise(null,function(b,d){d(p)}):ae(p)}var v=(function p(b,d,w,_,g){return B.resolve().then(function(){var x=F.transless||F,m=b._createTransaction(d,w,b._dbSchema,_);if(m.explicit=!0,x={trans:m,transless:x},_)m.idbtrans=_.idbtrans;else try{m.create(),m.idbtrans._explicit=!0,b._state.PR1398_maxLoop=3}catch(E){return E.name===Dn.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return p(b,d,w,null,g)})):ae(E)}var k,O=Kn(g);return O&&_t(),x=B.follow(function(){var E;(k=g.call(m,m))&&(O?(E=$e.bind(null,null),k.then(E,E)):typeof k.next=="function"&&typeof k.throw=="function"&&(k=ar(k)))},x),(k&&typeof k.then=="function"?B.resolve(k).then(function(E){return m.active?E:ae(new L.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return k})).then(function(E){return _&&m._resolve(),m._completion.then(function(){return E})}).catch(function(E){return m._reject(E),ae(E)})})}).bind(null,this,a,c,u,n);return u?u._promise(a,v,"lock"):F.trans?tt(F.transless,function(){return r._whenReady(v)}):this._whenReady(v)},se.prototype.table=function(e){if(!P(this._allTables,e))throw new L.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},se);function se(e,t){var n=this;this._middlewares={},this.verno=0;var r=se.dependencies;this._options=t=l({addons:se.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,a,c,f,v,p={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};p.dbReadyPromise=new B(function(d){p.dbReadyResolve=d}),p.openCanceller=new B(function(d,w){p.cancelOpen=w}),this._state=p,this.name=e,this.on=Kt(this,"populate","blocked","versionchange","close",{ready:[jn,ee]}),this.on.ready.subscribe=Be(this.on.ready.subscribe,function(d){return function(w,_){se.vip(function(){var g,x=n._state;x.openComplete?(x.dbOpenError||B.resolve().then(w),_&&d(w)):x.onReadyBeingFired?(x.onReadyBeingFired.push(w),_&&d(w)):(d(w),g=n,_||d(function m(){g.on.ready.unsubscribe(w),g.on.ready.unsubscribe(m)}))})}}),this.Collection=(u=this,Dt(Ci.prototype,function(k,m){this.db=u;var _=$r,g=null;if(m)try{_=m()}catch(O){g=O}var x=k._ctx,m=x.table,k=m.hook.reading.fire;this._ctx={table:m,index:x.index,isPrimKey:!x.index||m.schema.primKey.keyPath&&x.index===m.schema.primKey.name,range:_,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:g,or:x.or,valueMapper:k!==Pt?k:null}})),this.Table=(a=this,Dt(zr.prototype,function(d,w,_){this.db=a,this._tx=_,this.name=d,this.schema=w,this.hook=a._allTables[d]?a._allTables[d].hook:Kt(null,{creating:[mi,ee],reading:[yi,Pt],updating:[bi,ee],deleting:[gi,ee]})})),this.Transaction=(c=this,Dt(Ki.prototype,function(d,w,_,g,x){var m=this;this.db=c,this.mode=d,this.storeNames=w,this.schema=_,this.chromeTransactionDurability=g,this.idbtrans=null,this.on=Kt(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new B(function(k,O){m._resolve=k,m._reject=O}),this._completion.then(function(){m.active=!1,m.on.complete.fire()},function(k){var O=m.active;return m.active=!1,m.on.error.fire(k),m.parent?m.parent._reject(k):O&&m.idbtrans&&m.idbtrans.abort(),ae(k)})})),this.Version=(f=this,Dt(qi.prototype,function(d){this.db=f,this._cfg={version:d,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(v=this,Dt(Gr.prototype,function(d,w,_){if(this.db=v,this._ctx={table:d,index:w===":id"?null:w,or:_},this._cmp=this._ascending=X,this._descending=function(g,x){return X(x,g)},this._max=function(g,x){return 0<X(g,x)?g:x},this._min=function(g,x){return X(g,x)<0?g:x},this._IDBKeyRange=v._deps.IDBKeyRange,!this._IDBKeyRange)throw new L.MissingAPI})),this.on("versionchange",function(d){0<d.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(d.oldVersion/10))}),this._maxKey=Rt(t.IDBKeyRange),this._createTransaction=function(d,w,_,g){return new n.Transaction(d,w,_,n._options.chromeTransactionDurability,g)},this._fireOnBlocked=function(d){n.on("blocked").fire(d),vt.filter(function(w){return w.name===n.name&&w!==n&&!w._state.vcFired}).map(function(w){return w.on("versionchange").fire(d)})},this.use($i),this.use(zi),this.use(Li),this.use(Mi),this.use(Fi);var b=new Proxy(this,{get:function(d,w,_){if(w==="_vip")return!0;if(w==="table")return function(x){return yn(n.table(x),b)};var g=Reflect.get(d,w,_);return g instanceof zr?yn(g,b):w==="tables"?g.map(function(x){return yn(x,b)}):w==="_createTransaction"?function(){return yn(g.apply(this,arguments),b)}:g}});this.vip=b,r.forEach(function(d){return d(n)})}var mn,xe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Hi=(fr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},fr.prototype[xe]=function(){return this},fr);function fr(e){this._subscribe=e}try{mn={indexedDB:y.indexedDB||y.mozIndexedDB||y.webkitIndexedDB||y.msIndexedDB,IDBKeyRange:y.IDBKeyRange||y.webkitIDBKeyRange}}catch{mn={indexedDB:null,IDBKeyRange:null}}function fo(e){var t,n=!1,r=new Hi(function(u){var a=Kn(e),c,f=!1,v={},p={},b={get closed(){return f},unsubscribe:function(){f||(f=!0,c&&c.abort(),d&&Ve.storagemutated.unsubscribe(_))}};u.start&&u.start(b);var d=!1,w=function(){return Fn(g)},_=function(x){pn(v,x),rr(p,v)&&w()},g=function(){var x,m,k;!f&&mn.indexedDB&&(v={},x={},c&&c.abort(),c=new AbortController,k=function(O){var E=ht();try{a&&_t();var S=Fe(e,O);return S=a?S.finally($e):S}finally{E&&pt()}}(m={subscr:x,signal:c.signal,requery:w,querier:e,trans:null}),Promise.resolve(k).then(function(O){n=!0,t=O,f||m.signal.aborted||(v={},function(E){for(var S in E)if(P(E,S))return;return 1}(p=x)||d||(Ve(It,_),d=!0),Fn(function(){return!f&&u.next&&u.next(O)}))},function(O){n=!1,["DatabaseClosedError","AbortError"].includes(O==null?void 0:O.name)||f||Fn(function(){f||u.error&&u.error(O)})}))};return setTimeout(w,0),b});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var it=Te;function dr(e){var t=ze;try{ze=!0,Ve.storagemutated.fire(e),ur(e,!0)}finally{ze=t}}G(it,l(l({},Ht),{delete:function(e){return new it(e,{addons:[]}).delete()},exists:function(e){return new it(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=it.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(er(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(u){return u.name}).filter(function(u){return u!==tn})}):Jn(n,t).toCollection().primaryKeys()).then(e)}catch{return ae(new L.MissingAPI)}var t,n},defineClass:function(){return function(e){K(this,e)}},ignoreTransaction:function(e){return F.trans?tt(F.transless,e):e()},vip:tr,async:function(e){return function(){try{var t=ar(e.apply(this,arguments));return t&&typeof t.then=="function"?t:B.resolve(t)}catch(n){return ae(n)}}},spawn:function(e,t,n){try{var r=ar(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:B.resolve(r)}catch(u){return ae(u)}},currentTransaction:{get:function(){return F.trans||null}},waitFor:function(e,t){return t=B.resolve(typeof e=="function"?it.ignoreTransaction(e):e).timeout(t||6e4),F.trans?F.trans.waitFor(t):t},Promise:B,debug:{get:function(){return Oe},set:function(e){Ir(e)}},derive:le,extend:K,props:G,override:Be,Events:Kt,on:Ve,liveQuery:fo,extendObservabilitySet:pn,getByKeyPath:ve,setByKeyPath:he,delByKeyPath:function(e,t){typeof t=="string"?he(e,t,void 0):"length"in t&&[].map.call(t,function(n){he(e,n,void 0)})},shallowClone:Qe,deepClone:Ge,getObjectDiff:sr,cmp:X,asap:We,minKey:-1/0,addons:[],connections:vt,errnames:Dn,dependencies:mn,cache:ot,semVer:"4.0.8",version:"4.0.8".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),it.maxKey=Rt(it.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ve(It,function(e){ze||(e=new CustomEvent(Hn,{detail:e}),ze=!0,dispatchEvent(e),ze=!1)}),addEventListener(Hn,function(e){e=e.detail,ze||dr(e)}));var gt,ze=!1,ho=function(){};return typeof BroadcastChannel<"u"&&((ho=function(){(gt=new BroadcastChannel(Hn)).onmessage=function(e){return e.data&&dr(e.data)}})(),typeof gt.unref=="function"&&gt.unref(),Ve(It,function(e){ze||gt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Te.disableBfCache&&e.persisted){Oe&&console.debug("Dexie: handling persisted pagehide"),gt!=null&&gt.close();for(var t=0,n=vt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Te.disableBfCache&&e.persisted&&(Oe&&console.debug("Dexie: handling persisted pageshow"),ho(),dr({all:new ye(-1/0,[[]])}))})),B.rejectionMapper=function(e,t){return!e||e instanceof ft||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Tr[e.name]?e:(t=new Tr[e.name](t||e.message,e),"stack"in e&&J(t,"stack",{get:function(){return this.inner.stack}}),t)},Ir(Oe),l(Te,Object.freeze({__proto__:null,Dexie:Te,liveQuery:fo,Entity:Lr,cmp:X,PropModSymbol:je,PropModification:jt,replacePrefix:function(e,t){return new jt({replacePrefix:[e,t]})},add:function(e){return new jt({add:e})},remove:function(e){return new jt({remove:e})},default:Te,RangeSet:ye,mergeRanges:Bt,rangesOverlap:to}),{default:Te}),Te})})(Wo);var ru=Wo.exports;const wr=nu(ru),mo=Symbol.for("Dexie"),Pn=globalThis[mo]||(globalThis[mo]=wr);if(wr.semVer!==Pn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${wr.semVer} and ${Pn.semVer}`);const{liveQuery:ou,mergeRanges:Hu,rangesOverlap:Wu,RangeSet:Qu,cmp:Yu,Entity:Gu,PropModSymbol:Xu,PropModification:Zu,replacePrefix:Ju,add:ea,remove:ta}=Pn;var He,oe,pr,go,bt=0,Qo=[],ue=Q,bo=ue.__b,wo=ue.__r,xo=ue.diffed,ko=ue.__c,Po=ue.unmount,Oo=ue.__;function wt(o,i){ue.__h&&ue.__h(oe,o,bt||i),bt=0;var s=oe.__H||(oe.__H={__:[],__h:[]});return o>=s.__.length&&s.__.push({}),s.__[o]}function Ae(o){return bt=1,Sr(ti,o)}function Sr(o,i,s){var l=wt(He++,2);if(l.t=o,!l.__c&&(l.__=[s?s(i):ti(void 0,i),function(A){var K=l.__N?l.__N[0]:l.__[0],D=l.t(K,A);K!==D&&(l.__N=[D,l.__[1]],l.__c.setState({}))}],l.__c=oe,!oe.u)){var h=function(A,K,D){if(!l.__c.__H)return!0;var U=l.__c.__H.__.filter(function(G){return!!G.__c});if(U.every(function(G){return!G.__N}))return!y||y.call(this,A,K,D);var P=!1;return U.forEach(function(G){if(G.__N){var $=G.__[0];G.__=G.__N,G.__N=void 0,$!==G.__[0]&&(P=!0)}}),!(!P&&l.__c.props===A)&&(!y||y.call(this,A,K,D))};oe.u=!0;var y=oe.shouldComponentUpdate,C=oe.componentWillUpdate;oe.componentWillUpdate=function(A,K,D){if(this.__e){var U=y;y=void 0,h(A,K,D),y=U}C&&C.call(this,A,K,D)},oe.shouldComponentUpdate=h}return l.__N||l.__}function Ar(o,i){var s=wt(He++,3);!ue.__s&&Kr(s.__H,i)&&(s.__=o,s.i=i,oe.__H.__h.push(s))}function Vt(o,i){var s=wt(He++,4);!ue.__s&&Kr(s.__H,i)&&(s.__=o,s.i=i,oe.__h.push(s))}function Yo(o){return bt=5,En(function(){return{current:o}},[])}function Go(o,i,s){bt=6,Vt(function(){return typeof o=="function"?(o(i()),function(){return o(null)}):o?(o.current=i(),function(){return o.current=null}):void 0},s==null?s:s.concat(o))}function En(o,i){var s=wt(He++,7);return Kr(s.__H,i)&&(s.__=o(),s.__H=i,s.__h=o),s.__}function Xo(o,i){return bt=8,En(function(){return o},i)}function Zo(o){var i=oe.context[o.__c],s=wt(He++,9);return s.c=o,i?(s.__==null&&(s.__=!0,i.sub(oe)),i.props.value):o.__}function Jo(o,i){ue.useDebugValue&&ue.useDebugValue(i?i(o):o)}function ei(){var o=wt(He++,11);if(!o.__){for(var i=oe.__v;i!==null&&!i.__m&&i.__!==null;)i=i.__;var s=i.__m||(i.__m=[0,0]);o.__="P"+s[0]+"-"+s[1]++}return o.__}function iu(){for(var o;o=Qo.shift();)if(o.__P&&o.__H)try{o.__H.__h.forEach(wn),o.__H.__h.forEach(xr),o.__H.__h=[]}catch(i){o.__H.__h=[],ue.__e(i,o.__v)}}ue.__b=function(o){oe=null,bo&&bo(o)},ue.__=function(o,i){o&&i.__k&&i.__k.__m&&(o.__m=i.__k.__m),Oo&&Oo(o,i)},ue.__r=function(o){wo&&wo(o),He=0;var i=(oe=o.__c).__H;i&&(pr===oe?(i.__h=[],oe.__h=[],i.__.forEach(function(s){s.__N&&(s.__=s.__N),s.i=s.__N=void 0})):(i.__h.forEach(wn),i.__h.forEach(xr),i.__h=[],He=0)),pr=oe},ue.diffed=function(o){xo&&xo(o);var i=o.__c;i&&i.__H&&(i.__H.__h.length&&(Qo.push(i)!==1&&go===ue.requestAnimationFrame||((go=ue.requestAnimationFrame)||uu)(iu)),i.__H.__.forEach(function(s){s.i&&(s.__H=s.i),s.i=void 0})),pr=oe=null},ue.__c=function(o,i){i.some(function(s){try{s.__h.forEach(wn),s.__h=s.__h.filter(function(l){return!l.__||xr(l)})}catch(l){i.some(function(h){h.__h&&(h.__h=[])}),i=[],ue.__e(l,s.__v)}}),ko&&ko(o,i)},ue.unmount=function(o){Po&&Po(o);var i,s=o.__c;s&&s.__H&&(s.__H.__.forEach(function(l){try{wn(l)}catch(h){i=h}}),s.__H=void 0,i&&ue.__e(i,s.__v))};var Eo=typeof requestAnimationFrame=="function";function uu(o){var i,s=function(){clearTimeout(l),Eo&&cancelAnimationFrame(i),setTimeout(o)},l=setTimeout(s,100);Eo&&(i=requestAnimationFrame(s))}function wn(o){var i=oe,s=o.__c;typeof s=="function"&&(o.__c=void 0,s()),oe=i}function xr(o){var i=oe;o.__c=o.__(),oe=i}function Kr(o,i){return!o||o.length!==i.length||i.some(function(s,l){return s!==o[l]})}function ti(o,i){return typeof i=="function"?i(o):i}function ni(o,i){for(var s in i)o[s]=i[s];return o}function kr(o,i){for(var s in o)if(s!=="__source"&&!(s in i))return!0;for(var l in i)if(l!=="__source"&&o[l]!==i[l])return!0;return!1}function Pr(o,i){this.props=o,this.context=i}function au(o,i){function s(h){var y=this.props.ref,C=y==h.ref;return!C&&y&&(y.call?y(null):y.current=null),i?!i(this.props,h)||!C:kr(this.props,h)}function l(h){return this.shouldComponentUpdate=s,qe(o,h)}return l.displayName="Memo("+(o.displayName||o.name)+")",l.prototype.isReactComponent=!0,l.__f=!0,l}(Pr.prototype=new Se).isPureReactComponent=!0,Pr.prototype.shouldComponentUpdate=function(o,i){return kr(this.props,o)||kr(this.state,i)};var Co=Q.__b;Q.__b=function(o){o.type&&o.type.__f&&o.ref&&(o.props.ref=o.ref,o.ref=null),Co&&Co(o)};var su=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function cu(o){function i(s){var l=ni({},s);return delete l.ref,o(l,s.ref||null)}return i.$$typeof=su,i.render=i,i.prototype.isReactComponent=i.__f=!0,i.displayName="ForwardRef("+(o.displayName||o.name)+")",i}var So=function(o,i){return o==null?null:Ne(Ne(o).map(i))},lu={map:So,forEach:So,count:function(o){return o?Ne(o).length:0},only:function(o){var i=Ne(o);if(i.length!==1)throw"Children.only";return i[0]},toArray:Ne},fu=Q.__e;Q.__e=function(o,i,s,l){if(o.then){for(var h,y=i;y=y.__;)if((h=y.__c)&&h.__c)return i.__e==null&&(i.__e=s.__e,i.__k=s.__k),h.__c(o,i)}fu(o,i,s,l)};var Ao=Q.unmount;function ri(o,i,s){return o&&(o.__c&&o.__c.__H&&(o.__c.__H.__.forEach(function(l){typeof l.__c=="function"&&l.__c()}),o.__c.__H=null),(o=ni({},o)).__c!=null&&(o.__c.__P===s&&(o.__c.__P=i),o.__c=null),o.__k=o.__k&&o.__k.map(function(l){return ri(l,i,s)})),o}function oi(o,i,s){return o&&s&&(o.__v=null,o.__k=o.__k&&o.__k.map(function(l){return oi(l,i,s)}),o.__c&&o.__c.__P===i&&(o.__e&&s.appendChild(o.__e),o.__c.__e=!0,o.__c.__P=s)),o}function xn(){this.__u=0,this.t=null,this.__b=null}function ii(o){var i=o.__.__c;return i&&i.__a&&i.__a(o)}function du(o){var i,s,l;function h(y){if(i||(i=o()).then(function(C){s=C.default||C},function(C){l=C}),l)throw l;if(!s)throw i;return qe(s,y)}return h.displayName="Lazy",h.__f=!0,h}function Ft(){this.u=null,this.o=null}Q.unmount=function(o){var i=o.__c;i&&i.__R&&i.__R(),i&&32&o.__u&&(o.type=null),Ao&&Ao(o)},(xn.prototype=new Se).__c=function(o,i){var s=i.__c,l=this;l.t==null&&(l.t=[]),l.t.push(s);var h=ii(l.__v),y=!1,C=function(){y||(y=!0,s.__R=null,h?h(A):A())};s.__R=C;var A=function(){if(!--l.__u){if(l.state.__a){var K=l.state.__a;l.__v.__k[0]=oi(K,K.__c.__P,K.__c.__O)}var D;for(l.setState({__a:l.__b=null});D=l.t.pop();)D.forceUpdate()}};l.__u++||32&i.__u||l.setState({__a:l.__b=l.__v.__k[0]}),o.then(C,C)},xn.prototype.componentWillUnmount=function(){this.t=[]},xn.prototype.render=function(o,i){if(this.__b){if(this.__v.__k){var s=document.createElement("div"),l=this.__v.__k[0].__c;this.__v.__k[0]=ri(this.__b,s,l.__O=l.__P)}this.__b=null}var h=i.__a&&qe(Pe,null,o.fallback);return h&&(h.__u&=-33),[qe(Pe,null,i.__a?null:o.children),h]};var Ko=function(o,i,s){if(++s[1]===s[0]&&o.o.delete(i),o.props.revealOrder&&(o.props.revealOrder[0]!=="t"||!o.o.size))for(s=o.u;s;){for(;s.length>3;)s.pop()();if(s[1]<s[0])break;o.u=s=s[2]}};function hu(o){return this.getChildContext=function(){return o.context},o.children}function pu(o){var i=this,s=o.i;i.componentWillUnmount=function(){ct(null,i.l),i.l=null,i.i=null},i.i&&i.i!==s&&i.componentWillUnmount(),i.l||(i.i=s,i.l={nodeType:1,parentNode:s,childNodes:[],contains:function(){return!0},appendChild:function(l){this.childNodes.push(l),i.i.appendChild(l)},insertBefore:function(l,h){this.childNodes.push(l),i.i.appendChild(l)},removeChild:function(l){this.childNodes.splice(this.childNodes.indexOf(l)>>>1,1),i.i.removeChild(l)}}),ct(qe(hu,{context:i.context},o.__v),i.l)}function _u(o,i){var s=qe(pu,{__v:o,i});return s.containerInfo=i,s}(Ft.prototype=new Se).__a=function(o){var i=this,s=ii(i.__v),l=i.o.get(o);return l[0]++,function(h){var y=function(){i.props.revealOrder?(l.push(h),Ko(i,o,l)):h()};s?s(y):y()}},Ft.prototype.render=function(o){this.u=null,this.o=new Map;var i=Ne(o.children);o.revealOrder&&o.revealOrder[0]==="b"&&i.reverse();for(var s=i.length;s--;)this.o.set(i[s],this.u=[1,0,this.u]);return o.children},Ft.prototype.componentDidUpdate=Ft.prototype.componentDidMount=function(){var o=this;this.o.forEach(function(i,s){Ko(o,s,i)})};var ui=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,vu=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yu=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,mu=/[A-Z0-9]/g,gu=typeof document<"u",bu=function(o){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(o)};function wu(o,i,s){return i.__k==null&&(i.textContent=""),ct(o,i),typeof s=="function"&&s(),o?o.__c:null}function xu(o,i,s){return Ho(o,i),typeof s=="function"&&s(),o?o.__c:null}Se.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(o){Object.defineProperty(Se.prototype,o,{configurable:!0,get:function(){return this["UNSAFE_"+o]},set:function(i){Object.defineProperty(this,o,{configurable:!0,writable:!0,value:i})}})});var Do=Q.event;function ku(){}function Pu(){return this.cancelBubble}function Ou(){return this.defaultPrevented}Q.event=function(o){return Do&&(o=Do(o)),o.persist=ku,o.isPropagationStopped=Pu,o.isDefaultPrevented=Ou,o.nativeEvent=o};var Dr,Eu={enumerable:!1,configurable:!0,get:function(){return this.class}},jo=Q.vnode;Q.vnode=function(o){typeof o.type=="string"&&function(i){var s=i.props,l=i.type,h={},y=l.indexOf("-")===-1;for(var C in s){var A=s[C];if(!(C==="value"&&"defaultValue"in s&&A==null||gu&&C==="children"&&l==="noscript"||C==="class"||C==="className")){var K=C.toLowerCase();C==="defaultValue"&&"value"in s&&s.value==null?C="value":C==="download"&&A===!0?A="":K==="translate"&&A==="no"?A=!1:K[0]==="o"&&K[1]==="n"?K==="ondoubleclick"?C="ondblclick":K!=="onchange"||l!=="input"&&l!=="textarea"||bu(s.type)?K==="onfocus"?C="onfocusin":K==="onblur"?C="onfocusout":yu.test(C)&&(C=K):K=C="oninput":y&&vu.test(C)?C=C.replace(mu,"-$&").toLowerCase():A===null&&(A=void 0),K==="oninput"&&h[C=K]&&(C="oninputCapture"),h[C]=A}}l=="select"&&h.multiple&&Array.isArray(h.value)&&(h.value=Ne(s.children).forEach(function(D){D.props.selected=h.value.indexOf(D.props.value)!=-1})),l=="select"&&h.defaultValue!=null&&(h.value=Ne(s.children).forEach(function(D){D.props.selected=h.multiple?h.defaultValue.indexOf(D.props.value)!=-1:h.defaultValue==D.props.value})),s.class&&!s.className?(h.class=s.class,Object.defineProperty(h,"className",Eu)):(s.className&&!s.class||s.class&&s.className)&&(h.class=h.className=s.className),i.props=h}(o),o.$$typeof=ui,jo&&jo(o)};var To=Q.__r;Q.__r=function(o){To&&To(o),Dr=o.__c};var Io=Q.diffed;Q.diffed=function(o){Io&&Io(o);var i=o.props,s=o.__e;s!=null&&o.type==="textarea"&&"value"in i&&i.value!==s.value&&(s.value=i.value==null?"":i.value),Dr=null};var Cu={ReactCurrentDispatcher:{current:{readContext:function(o){return Dr.__n[o.__c].props.value},useCallback:Xo,useContext:Zo,useDebugValue:Jo,useDeferredValue:si,useEffect:Ar,useId:ei,useImperativeHandle:Go,useInsertionEffect:li,useLayoutEffect:Vt,useMemo:En,useReducer:Sr,useRef:Yo,useState:Ae,useSyncExternalStore:fi,useTransition:ci}}};function Su(o){return qe.bind(null,o)}function Cn(o){return!!o&&o.$$typeof===ui}function Au(o){return Cn(o)&&o.type===Pe}function Ku(o){return!!o&&!!o.displayName&&(typeof o.displayName=="string"||o.displayName instanceof String)&&o.displayName.startsWith("Memo(")}function Du(o){return Cn(o)?Ji.apply(null,arguments):o}function ju(o){return!!o.__k&&(ct(null,o),!0)}function Tu(o){return o&&(o.base||o.nodeType===1&&o)||null}var Iu=function(o,i){return o(i)},Ru=function(o,i){return o(i)},Nu=Pe;function ai(o){o()}function si(o){return o}function ci(){return[!1,ai]}var li=Vt,qu=Cn;function fi(o,i){var s=i(),l=Ae({h:{__:s,v:i}}),h=l[0].h,y=l[1];return Vt(function(){h.__=s,h.v=i,_r(h)&&y({h})},[o,s,i]),Ar(function(){return _r(h)&&y({h}),o(function(){_r(h)&&y({h})})},[o]),s}function _r(o){var i,s,l=o.v,h=o.__;try{var y=l();return!((i=h)===(s=y)&&(i!==0||1/i==1/s)||i!=i&&s!=s)}catch{return!0}}var Mt={useState:Ae,useId:ei,useReducer:Sr,useEffect:Ar,useLayoutEffect:Vt,useInsertionEffect:li,useTransition:ci,useDeferredValue:si,useSyncExternalStore:fi,startTransition:ai,useRef:Yo,useImperativeHandle:Go,useMemo:En,useCallback:Xo,useContext:Zo,useDebugValue:Jo,version:"17.0.2",Children:lu,render:wu,hydrate:xu,unmountComponentAtNode:ju,createPortal:_u,createElement:qe,createContext:eu,createFactory:Su,cloneElement:Du,createRef:Qi,Fragment:Pe,isValidElement:Cn,isElement:qu,isFragment:Au,isMemo:Ku,findDOMNode:Tu,Component:Se,PureComponent:Pr,memo:au,forwardRef:cu,flushSync:Ru,unstable_batchedUpdates:Iu,StrictMode:Nu,Suspense:xn,SuspenseList:Ft,lazy:du,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Cu};function Bu(o,i,s){var l,h;typeof o=="function"?(l=i||[],h=s):(l=[],h=i);var y=Mt.useRef({hasResult:!1,result:h,error:null}),C=Mt.useReducer(function(D){return D+1},0);C[0];var A=C[1],K=Mt.useMemo(function(){var D=typeof o=="function"?o():o;if(!D||typeof D.subscribe!="function")throw o===D?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!y.current.hasResult&&typeof window<"u"&&(typeof D.hasValue!="function"||D.hasValue()))if(typeof D.getValue=="function")y.current.result=D.getValue(),y.current.hasResult=!0;else{var U=D.subscribe(function(P){y.current.result=P,y.current.hasResult=!0});typeof U=="function"?U():U.unsubscribe()}return D},l);if(Mt.useDebugValue(y.current.result),Mt.useEffect(function(){var D=K.subscribe(function(U){var P=y.current;(P.error!==null||P.result!==U)&&(P.error=null,P.result=U,P.hasResult=!0,A())},function(U){var P=y.current;P.error!==U&&(P.error=U,A())});return typeof D=="function"?D:D.unsubscribe.bind(D)},l),y.current.error)throw y.current.error;return y.current.result}function di(o,i,s){return Bu(function(){return ou(o)},i||[],s)}async function Mu(){var s;console.log("Debut de la fonction populate");const o=await Re.lists.count();let i;if(o&&o>0?i=(s=(await Re.lists.toArray())[0])==null?void 0:s.id:i=await Re.lists.add({title:"Default"}),i===void 0)throw new Error("La liste n'a pas pu être créée ou récupérée.");await Re.cards.bulkAdd([{question:"What is the capital of France?",answer:"Paris",listId:i},{question:"What is the capital of Germany?",answer:"Berlin",listId:i},{question:"What is the capital of Spain?",answer:"Madrid",listId:i}]),console.log("Data populated")}const Re=new Pn("FlashcardsDataBase");Re.version(1).stores({lists:"++id",cards:"++id,listId"});Re.on("populate",Mu);function Fu({onSelect:o,lists:i}){return console.log(o),console.log(i),M("div",{children:M("select",{class:"rounded-3xl border-none bg-blue-100 px-5 py-0.5 transition-all duration-200 hover:bg-blue-50 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 active:rounded-b-none active:rounded-t-2xl",onChange:s=>o(i.find(l=>l.title===s.target.value)),children:i.map(s=>M("option",{value:s.title,children:s.title},s.id))})})}const $u=()=>M("div",{id:"bar",class:"absolute left-1/2 top-3 flex h-10 max-w-md -translate-x-1/2 items-center justify-between space-x-8 rounded-full bg-blue-50 px-6 shadow-md",children:[M("div",{class:"flex space-x-2.5",children:[M("div",{class:"group relative flex size-6 items-center rounded-full p-1 transition-all duration-200 hover:bg-blue-200 hover:shadow-md active:bg-blue-300 active:shadow-inner",children:[M("img",{src:"src/assets/typing.svg",alt:"typing icon",class:"size-full transition-all duration-200 group-hover:scale-110"}),M("span",{class:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap rounded bg-gray-800 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100",children:"Typing"})]}),M("div",{class:"group relative flex size-6 items-center rounded-full p-1 transition-all duration-200 hover:bg-blue-200 hover:shadow-md active:bg-blue-300 active:shadow-inner",children:[M("img",{src:"src/assets/swipping.svg",alt:"swipping icon",class:"size-full transition-all duration-200 group-hover:scale-110"}),M("span",{class:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap rounded bg-gray-800 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100",children:"Swipping"})]}),M("div",{class:"group relative flex size-6 items-center rounded-full p-1 transition-all duration-200 hover:bg-blue-200 hover:shadow-md active:bg-blue-300 active:shadow-inner",children:[M("img",{src:"src/assets/filling.svg",alt:"filling icon",class:"size-full transition-all duration-200 group-hover:scale-110"}),M("span",{class:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap rounded bg-gray-800 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100",children:"Filling"})]})]}),M("div",{class:"flex space-x-2.5",children:[M("div",{class:"group relative flex size-[1.35rem] items-center rounded-full p-1 transition-all duration-200 hover:bg-blue-200 hover:shadow-md active:bg-blue-300 active:shadow-inner",children:[M("img",{src:"src/assets/edit.svg",alt:"edit icon",class:"size-full transition-all duration-200 group-hover:scale-110"}),M("span",{class:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap rounded bg-gray-800 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100",children:"Edit"})]}),M("div",{class:"group relative flex size-[1.35rem] items-center rounded-full p-1 transition-all duration-200 hover:bg-blue-200 hover:shadow-md active:bg-blue-300 active:shadow-inner",children:[M("img",{src:"src/assets/add.svg",alt:"add icon",class:"size-full transition-all duration-200 group-hover:scale-110"}),M("span",{class:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap rounded bg-gray-800 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100",children:"Add"})]})]})]});function Lu({card:o,onAnswer:i}){const[s,l]=Ae(""),[h,y]=Ae(!1),[C,A]=Ae(!1),{id:K,question:D,answer:U}=o;console.log(K);const P=$=>{if($.key==="Enter"){const J=s.toLowerCase()===U.toLowerCase();y(!0),A(J)}},G=()=>{y(!1),l(""),i(o,C)};return M(Pe,{children:[h?M("div",{onClick:G,onKeyDown:$=>{$.key==="Enter"&&(console.log("Enter"),G())},class:"relative mx-auto flex min-h-[60vh] w-full items-center justify-center rounded-3xl bg-blue-100 p-8 font-bold text-blue-50 shadow-md transition-all duration-200  hover:shadow-lg active:scale-95 active:bg-blue-200",children:C?M("h4",{class:"text-3xl text-green-700",children:s}):M("div",{class:"flex flex-col items-center space-y-6",children:[M("h3",{class:"text-blue-900",children:U}),M("h4",{class:"text-red-700",children:s})," "]})}):M("div",{class:"relative mx-auto flex min-h-[60vh] w-full items-center justify-center rounded-3xl bg-blue-100 p-8 font-bold text-blue-50 shadow-md transition-all duration-200  hover:shadow-lg",children:M("div",{class:"flex flex-col items-center space-y-6",children:[M("h3",{class:"text-blue-900",children:D}),M("input",{class:"rounded-md border-2 border-blue-500 bg-blue-100 px-5 py-0.5 text-blue-900 shadow-md transition-all duration-200 hover:bg-blue-50 hover:shadow-lg focus:outline-none focus:ring-1 focus:ring-blue-500",type:"text",value:s,onInput:$=>l($.currentTarget.value),onKeyDown:P})]})}),M($u,{})]})}function Ro({list:o}){console.log("list:",o,"list.id:",o.id);const[i,s]=Ae([]),[l,h]=Ae([]),[y,C]=Ae([]);di(async()=>{const K=await Re.cards.where({listId:o.id}).toArray();s(K),console.log("allCards useLiveQuery :",i);const D=K.filter(P=>P.delay===void 0||P.delay===0);h(D),console.log("pendingCards useLiveQuery :",l);const U=K.filter(P=>P.delay!==void 0&&P.delay!==0);C(U),console.log("allCards useLiveQuery :",y)},[o.id]);function A(K,D){D?(K.count?K.count++:K.count=1,K.delay=Math.pow(2,K.count)):(K.delay=0,K.count!==void 0?(K.count-=3,K.count<0&&(K.count=0)):K.count=0),K.id&&Re.cards.update(K.id,K)}return M(Pe,{children:l.length>0?M(Lu,{card:l[0],onAnswer:A}):M("div",{class:"flex h-full items-center justify-center text-blue-50",children:M("h2",{class:"text-2xl",children:"No more cards to review"})})})}function Uu(){const o=di(()=>Re.lists.toArray());if(!o)return null;const[i,s]=Ae();function l(y){s(y)}const h=document.getElementById("navbar");return h&&ct(M(Fu,{onSelect:l,lists:o}),h),M("div",{children:i?M(Ro,{list:i}):M(Ro,{list:o[0]})})}function Vu(){return M("div",{class:"flex min-h-screen flex-col",children:[M("nav",{id:"navbar",class:"flex h-12 w-full items-center justify-center bg-blue-300 px-4",children:M("div",{children:M("select",{id:"select-list",class:"rounded-3xl border-none bg-blue-100 px-5 py-0.5 transition-all duration-200 hover:bg-blue-50 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 active:rounded-b-none active:rounded-t-2xl",children:[M("option",{value:"0",class:"flex items-center justify-start bg-blue-800 p-3 text-blue-100 hover:bg-blue-100",children:"Deck 1"}),M("option",{value:"1",class:"flex items-center justify-start bg-blue-800 p-3  text-blue-100 hover:bg-blue-50",children:"Deck 2"}),M("option",{value:"2",class:"flex items-center justify-start bg-blue-800   p-3 text-blue-100 hover:bg-blue-100",children:"Deck 3"})]})})}),M("main",{class:"flex grow items-center justify-center bg-blue-500",children:M("div",{class:"relative w-full max-w-md",children:M(Uu,{})})}),M("footer",{class:"flex h-20 w-full items-center justify-center bg-blue-300 transition-colors",children:M("div",{id:"footer-bar",class:"flex space-x-10",children:[M("div",{id:"div-learning",class:"group flex cursor-pointer flex-col items-center",children:[M("div",{class:"mb-1 size-8 rounded-full p-1.5 transition-all duration-200 group-hover:bg-blue-200 group-hover:shadow-md group-active:bg-blue-400 group-active:shadow-inner",children:M("img",{src:"../assets/learn.svg",alt:"learning",class:"size-full transition-all duration-200 group-hover:scale-110"})}),M("span",{class:"text-[0.7rem] font-light transition-all duration-200 group-hover:font-normal group-hover:text-blue-900",children:"learning"})]}),M("div",{id:"div-collection",class:"group flex cursor-pointer flex-col items-center",children:[M("div",{class:"mb-1 size-8 rounded-full p-1.5 transition-all duration-200 group-hover:bg-blue-200 group-hover:shadow-md group-active:bg-blue-400 group-active:shadow-inner",children:M("img",{src:"/collection.svg",alt:"Collection",class:"size-full transition-all duration-200 group-hover:scale-110"})}),M("span",{class:"text-[0.7rem] font-light transition-all duration-200 group-hover:font-normal group-hover:text-blue-900",children:"Collection"})]}),M("div",{id:"div-progress",class:"group flex cursor-pointer flex-col items-center",children:[M("div",{class:"mb-1 size-8 rounded-full p-1.5 transition-all duration-200 group-hover:bg-blue-200 group-hover:shadow-md group-active:bg-blue-400 group-active:shadow-inner",children:M("img",{src:"../assets/progress.svg",alt:"Progress",class:"size-full transition-all duration-200 group-hover:scale-110"})}),M("span",{class:"text-[0.7rem] font-light transition-all duration-200 group-hover:font-normal group-hover:text-blue-900",children:"Progress"})]})]})})]})}function zu(){return M("div",{children:M(Vu,{})})}const No=document.getElementById("root");No&&ct(M(zu,{}),No);
